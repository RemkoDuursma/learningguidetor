<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 7 Project management and workflow | A Learning Guide to R: data, analytical, and programming skills.</title>
  <meta name="description" content="This book teaches introductory to intermediate skills in R." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 7 Project management and workflow | A Learning Guide to R: data, analytical, and programming skills." />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book teaches introductory to intermediate skills in R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 7 Project management and workflow | A Learning Guide to R: data, analytical, and programming skills." />
  
  <meta name="twitter:description" content="This book teaches introductory to intermediate skills in R." />
  

<meta name="author" content="Remko Duursma" />


<meta name="date" content="2020-11-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="versioncontrol.html"/>
<link rel="next" href="masteringpackages.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Learning Guide to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#aboutauthor"><i class="fa fa-check"></i>About the author</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Beginner skills</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#installingr"><i class="fa fa-check"></i><b>1.1</b> Installing R and Rstudio</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#exampledata"><i class="fa fa-check"></i><b>1.1.1</b> Example data used throughout this book</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#basicops"><i class="fa fa-check"></i><b>1.2</b> Basic operations</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#vectorintro"><i class="fa fa-check"></i><b>1.3</b> Working with vectors</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#writing-code-in-a-script"><i class="fa fa-check"></i><b>1.4</b> Writing code in a script</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#vectorized"><i class="fa fa-check"></i><b>1.5</b> Vectorized operations</a><ul>
<li class="chapter" data-level="1.5.1" data-path="intro.html"><a href="intro.html#multifunctions"><i class="fa fa-check"></i><b>1.5.1</b> Applying multiple functions at once</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#matrices"><i class="fa fa-check"></i><b>1.6</b> Working with matrices</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#objects-in-the-workspace"><i class="fa fa-check"></i><b>1.7</b> Objects in the workspace</a></li>
<li class="chapter" data-level="1.8" data-path="intro.html"><a href="intro.html#fileswd"><i class="fa fa-check"></i><b>1.8</b> Files in the working directory</a></li>
<li class="chapter" data-level="1.9" data-path="intro.html"><a href="intro.html#rstudio-projects"><i class="fa fa-check"></i><b>1.9</b> Rstudio projects</a></li>
<li class="chapter" data-level="1.10" data-path="intro.html"><a href="intro.html#packages"><i class="fa fa-check"></i><b>1.10</b> Packages</a><ul>
<li class="chapter" data-level="1.10.1" data-path="intro.html"><a href="intro.html#installpackage"><i class="fa fa-check"></i><b>1.10.1</b> Install packages from CRAN</a></li>
<li class="chapter" data-level="1.10.2" data-path="intro.html"><a href="intro.html#loadpackage"><i class="fa fa-check"></i><b>1.10.2</b> Loading packages</a></li>
<li class="chapter" data-level="1.10.3" data-path="intro.html"><a href="intro.html#setting-the-cran-mirror"><i class="fa fa-check"></i><b>1.10.3</b> Setting the CRAN mirror</a></li>
<li class="chapter" data-level="1.10.4" data-path="intro.html"><a href="intro.html#install-from-git-hosting-sites"><i class="fa fa-check"></i><b>1.10.4</b> Install from git hosting sites</a></li>
<li class="chapter" data-level="1.10.5" data-path="intro.html"><a href="intro.html#updating-r-and-package-locations"><i class="fa fa-check"></i><b>1.10.5</b> Updating R and package locations</a></li>
<li class="chapter" data-level="1.10.6" data-path="intro.html"><a href="intro.html#updatingpackages"><i class="fa fa-check"></i><b>1.10.6</b> Updating packages</a></li>
<li class="chapter" data-level="1.10.7" data-path="intro.html"><a href="intro.html#install-missing-packages"><i class="fa fa-check"></i><b>1.10.7</b> Install missing packages</a></li>
<li class="chapter" data-level="1.10.8" data-path="intro.html"><a href="intro.html#conflicts"><i class="fa fa-check"></i><b>1.10.8</b> Conflicts</a></li>
<li class="chapter" data-level="1.10.9" data-path="intro.html"><a href="intro.html#pacman"><i class="fa fa-check"></i><b>1.10.9</b> Loading many packages</a></li>
</ul></li>
<li class="chapter" data-level="1.11" data-path="intro.html"><a href="intro.html#helpfiles"><i class="fa fa-check"></i><b>1.11</b> Accessing the help files</a></li>
<li class="chapter" data-level="1.12" data-path="intro.html"><a href="intro.html#writing-lots-of-code-rmarkdown-or-scripts"><i class="fa fa-check"></i><b>1.12</b> Writing lots of code: rmarkdown or scripts?</a><ul>
<li class="chapter" data-level="1.12.1" data-path="intro.html"><a href="intro.html#reproducible-documents-with-rmarkdown"><i class="fa fa-check"></i><b>1.12.1</b> Reproducible documents with rmarkdown</a></li>
<li class="chapter" data-level="1.12.2" data-path="intro.html"><a href="intro.html#scripts"><i class="fa fa-check"></i><b>1.12.2</b> Using R scripts</a></li>
</ul></li>
<li class="chapter" data-level="1.13" data-path="intro.html"><a href="intro.html#pay-attention-to-detail-write-clean-code"><i class="fa fa-check"></i><b>1.13</b> Pay attention to detail: write clean code</a></li>
<li class="chapter" data-level="1.14" data-path="intro.html"><a href="intro.html#exercises"><i class="fa fa-check"></i><b>1.14</b> Exercises</a><ul>
<li class="chapter" data-level="1.14.1" data-path="intro.html"><a href="intro.html#calculating"><i class="fa fa-check"></i><b>1.14.1</b> Calculating</a></li>
<li class="chapter" data-level="1.14.2" data-path="intro.html"><a href="intro.html#simple-objects"><i class="fa fa-check"></i><b>1.14.2</b> Simple objects</a></li>
<li class="chapter" data-level="1.14.3" data-path="intro.html"><a href="intro.html#vecexerc1"><i class="fa fa-check"></i><b>1.14.3</b> Working with a single vector</a></li>
<li class="chapter" data-level="1.14.4" data-path="intro.html"><a href="intro.html#scriptexercise"><i class="fa fa-check"></i><b>1.14.4</b> Scripts</a></li>
<li class="chapter" data-level="1.14.5" data-path="intro.html"><a href="intro.html#exquote"><i class="fa fa-check"></i><b>1.14.5</b> To quote or not to quote</a></li>
<li class="chapter" data-level="1.14.6" data-path="intro.html"><a href="intro.html#working-with-two-vectors"><i class="fa fa-check"></i><b>1.14.6</b> Working with two vectors</a></li>
<li class="chapter" data-level="1.14.7" data-path="intro.html"><a href="intro.html#alphabet-aerobics-1"><i class="fa fa-check"></i><b>1.14.7</b> Alphabet aerobics 1</a></li>
<li class="chapter" data-level="1.14.8" data-path="intro.html"><a href="intro.html#comparing-and-combining-vectors"><i class="fa fa-check"></i><b>1.14.8</b> Comparing and combining vectors</a></li>
<li class="chapter" data-level="1.14.9" data-path="intro.html"><a href="intro.html#into-the-matrix"><i class="fa fa-check"></i><b>1.14.9</b> Into the matrix</a></li>
<li class="chapter" data-level="1.14.10" data-path="intro.html"><a href="intro.html#packages-1"><i class="fa fa-check"></i><b>1.14.10</b> Packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="dataskills1.html"><a href="dataskills1.html"><i class="fa fa-check"></i><b>2</b> Data skills - Part 1</a><ul>
<li class="chapter" data-level="2.1" data-path="dataskills1.html"><a href="dataskills1.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="dataskills1.html"><a href="dataskills1.html#generating-data"><i class="fa fa-check"></i><b>2.2</b> Generating data</a><ul>
<li class="chapter" data-level="2.2.1" data-path="dataskills1.html"><a href="dataskills1.html#sequences"><i class="fa fa-check"></i><b>2.2.1</b> Sequences of numbers</a></li>
<li class="chapter" data-level="2.2.2" data-path="dataskills1.html"><a href="dataskills1.html#randomnumbers"><i class="fa fa-check"></i><b>2.2.2</b> Random numbers</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="dataskills1.html"><a href="dataskills1.html#readingdata"><i class="fa fa-check"></i><b>2.3</b> Reading data</a><ul>
<li class="chapter" data-level="2.3.1" data-path="dataskills1.html"><a href="dataskills1.html#readcsv"><i class="fa fa-check"></i><b>2.3.1</b> Reading CSV files</a></li>
<li class="chapter" data-level="2.3.2" data-path="dataskills1.html"><a href="dataskills1.html#reading-large-csv-files"><i class="fa fa-check"></i><b>2.3.2</b> Reading large CSV files</a></li>
<li class="chapter" data-level="2.3.3" data-path="dataskills1.html"><a href="dataskills1.html#tabdelimtext"><i class="fa fa-check"></i><b>2.3.3</b> Reading Tab-delimited text files</a></li>
<li class="chapter" data-level="2.3.4" data-path="dataskills1.html"><a href="dataskills1.html#datainscript"><i class="fa fa-check"></i><b>2.3.4</b> Including data in a script</a></li>
<li class="chapter" data-level="2.3.5" data-path="dataskills1.html"><a href="dataskills1.html#json"><i class="fa fa-check"></i><b>2.3.5</b> JSON</a></li>
<li class="chapter" data-level="2.3.6" data-path="dataskills1.html"><a href="dataskills1.html#nosql-databases"><i class="fa fa-check"></i><b>2.3.6</b> (No)SQL databases</a></li>
<li class="chapter" data-level="2.3.7" data-path="dataskills1.html"><a href="dataskills1.html#excel-spreadsheets"><i class="fa fa-check"></i><b>2.3.7</b> Excel spreadsheets</a></li>
<li class="chapter" data-level="2.3.8" data-path="dataskills1.html"><a href="dataskills1.html#proprietary-formats"><i class="fa fa-check"></i><b>2.3.8</b> Proprietary formats</a></li>
<li class="chapter" data-level="2.3.9" data-path="dataskills1.html"><a href="dataskills1.html#web-services"><i class="fa fa-check"></i><b>2.3.9</b> Web services</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="dataskills1.html"><a href="dataskills1.html#dataframes"><i class="fa fa-check"></i><b>2.4</b> Working with dataframes</a><ul>
<li class="chapter" data-level="2.4.1" data-path="dataskills1.html"><a href="dataskills1.html#vecstodfr"><i class="fa fa-check"></i><b>2.4.1</b> Convert vectors into a dataframe</a></li>
<li class="chapter" data-level="2.4.2" data-path="dataskills1.html"><a href="dataskills1.html#vecdataframes"><i class="fa fa-check"></i><b>2.4.2</b> Variables in the dataframe</a></li>
<li class="chapter" data-level="2.4.3" data-path="dataskills1.html"><a href="dataskills1.html#namesdataframe"><i class="fa fa-check"></i><b>2.4.3</b> Changing column names in dataframes</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="dataskills1.html"><a href="dataskills1.html#extracting-data"><i class="fa fa-check"></i><b>2.5</b> Extracting data</a><ul>
<li class="chapter" data-level="2.5.1" data-path="dataskills1.html"><a href="dataskills1.html#vectorindexing"><i class="fa fa-check"></i><b>2.5.1</b> Vectors</a></li>
<li class="chapter" data-level="2.5.2" data-path="dataskills1.html"><a href="dataskills1.html#subsetdataframes"><i class="fa fa-check"></i><b>2.5.2</b> Dataframes</a></li>
<li class="chapter" data-level="2.5.3" data-path="dataskills1.html"><a href="dataskills1.html#a-faster-method"><i class="fa fa-check"></i><b>2.5.3</b> A faster method</a></li>
<li class="chapter" data-level="2.5.4" data-path="dataskills1.html"><a href="dataskills1.html#deleting-columns"><i class="fa fa-check"></i><b>2.5.4</b> Deleting columns</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="dataskills1.html"><a href="dataskills1.html#exportingdata"><i class="fa fa-check"></i><b>2.6</b> Exporting data</a></li>
<li class="chapter" data-level="2.7" data-path="dataskills1.html"><a href="dataskills1.html#special-data-types"><i class="fa fa-check"></i><b>2.7</b> Special data types</a><ul>
<li class="chapter" data-level="2.7.1" data-path="dataskills1.html"><a href="dataskills1.html#workingfactors"><i class="fa fa-check"></i><b>2.7.1</b> Working with factors</a></li>
<li class="chapter" data-level="2.7.2" data-path="dataskills1.html"><a href="dataskills1.html#workinglogic"><i class="fa fa-check"></i><b>2.7.2</b> Working with logical data</a></li>
<li class="chapter" data-level="2.7.3" data-path="dataskills1.html"><a href="dataskills1.html#workingmissing"><i class="fa fa-check"></i><b>2.7.3</b> Working with missing values</a></li>
<li class="chapter" data-level="2.7.4" data-path="dataskills1.html"><a href="dataskills1.html#workingtext"><i class="fa fa-check"></i><b>2.7.4</b> Working with text</a></li>
<li class="chapter" data-level="2.7.5" data-path="dataskills1.html"><a href="dataskills1.html#workingwithdates"><i class="fa fa-check"></i><b>2.7.5</b> Working with dates and times</a></li>
<li class="chapter" data-level="2.7.6" data-path="dataskills1.html"><a href="dataskills1.html#converttype"><i class="fa fa-check"></i><b>2.7.6</b> Converting between data types</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="dataskills1.html"><a href="dataskills1.html#exercises-1"><i class="fa fa-check"></i><b>2.8</b> Exercises</a><ul>
<li class="chapter" data-level="2.8.1" data-path="dataskills1.html"><a href="dataskills1.html#working-with-a-single-vector---indexing"><i class="fa fa-check"></i><b>2.8.1</b> Working with a single vector - indexing</a></li>
<li class="chapter" data-level="2.8.2" data-path="dataskills1.html"><a href="dataskills1.html#alphabet-aerobics-2"><i class="fa fa-check"></i><b>2.8.2</b> Alphabet aerobics 2</a></li>
<li class="chapter" data-level="2.8.3" data-path="dataskills1.html"><a href="dataskills1.html#basic-operations-with-the-cereals-data"><i class="fa fa-check"></i><b>2.8.3</b> Basic operations with the Cereals data</a></li>
<li class="chapter" data-level="2.8.4" data-path="dataskills1.html"><a href="dataskills1.html#a-short-dataset"><i class="fa fa-check"></i><b>2.8.4</b> A short dataset</a></li>
<li class="chapter" data-level="2.8.5" data-path="dataskills1.html"><a href="dataskills1.html#titanic---part-1"><i class="fa fa-check"></i><b>2.8.5</b> Titanic - Part 1</a></li>
<li class="chapter" data-level="2.8.6" data-path="dataskills1.html"><a href="dataskills1.html#titanic---part-2"><i class="fa fa-check"></i><b>2.8.6</b> Titanic - Part 2</a></li>
<li class="chapter" data-level="2.8.7" data-path="dataskills1.html"><a href="dataskills1.html#hydro-dam"><i class="fa fa-check"></i><b>2.8.7</b> Hydro dam</a></li>
<li class="chapter" data-level="2.8.8" data-path="dataskills1.html"><a href="dataskills1.html#hfe-tree-measurements"><i class="fa fa-check"></i><b>2.8.8</b> HFE tree measurements</a></li>
<li class="chapter" data-level="2.8.9" data-path="dataskills1.html"><a href="dataskills1.html#flux-data"><i class="fa fa-check"></i><b>2.8.9</b> Flux data</a></li>
<li class="chapter" data-level="2.8.10" data-path="dataskills1.html"><a href="dataskills1.html#dna-aerobics"><i class="fa fa-check"></i><b>2.8.10</b> DNA Aerobics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataskills2.html"><a href="dataskills2.html"><i class="fa fa-check"></i><b>3</b> Data skills - Part 2</a><ul>
<li class="chapter" data-level="3.1" data-path="dataskills2.html"><a href="dataskills2.html#summarizing-dataframes"><i class="fa fa-check"></i><b>3.1</b> Summarizing dataframes</a><ul>
<li class="chapter" data-level="3.1.1" data-path="dataskills2.html"><a href="dataskills2.html#tapplyaggregate"><i class="fa fa-check"></i><b>3.1.1</b> Making summary tables</a></li>
<li class="chapter" data-level="3.1.2" data-path="dataskills2.html"><a href="dataskills2.html#xtabs"><i class="fa fa-check"></i><b>3.1.2</b> Tables of counts</a></li>
<li class="chapter" data-level="3.1.3" data-path="dataskills2.html"><a href="dataskills2.html#summaryvars"><i class="fa fa-check"></i><b>3.1.3</b> Adding summary variables to dataframes</a></li>
<li class="chapter" data-level="3.1.4" data-path="dataskills2.html"><a href="dataskills2.html#reorder"><i class="fa fa-check"></i><b>3.1.4</b> Reordering factor levels based on a summary variable</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="dataskills2.html"><a href="dataskills2.html#combining-dataframes"><i class="fa fa-check"></i><b>3.2</b> Combining dataframes</a><ul>
<li class="chapter" data-level="3.2.1" data-path="dataskills2.html"><a href="dataskills2.html#merge"><i class="fa fa-check"></i><b>3.2.1</b> Merging dataframes</a></li>
<li class="chapter" data-level="3.2.2" data-path="dataskills2.html"><a href="dataskills2.html#dplyrjoin"><i class="fa fa-check"></i><b>3.2.2</b> Using join from <code>dplyr</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="dataskills2.html"><a href="dataskills2.html#rbind"><i class="fa fa-check"></i><b>3.2.3</b> Row-binding dataframes</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="dataskills2.html"><a href="dataskills2.html#reshaping"><i class="fa fa-check"></i><b>3.3</b> Reshaping data</a><ul>
<li class="chapter" data-level="3.3.1" data-path="dataskills2.html"><a href="dataskills2.html#from-wide-to-long"><i class="fa fa-check"></i><b>3.3.1</b> From wide to long</a></li>
<li class="chapter" data-level="3.3.2" data-path="dataskills2.html"><a href="dataskills2.html#from-long-to-wide"><i class="fa fa-check"></i><b>3.3.2</b> From long to wide</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="dataskills2.html"><a href="dataskills2.html#more-complex-dplyr-examples"><i class="fa fa-check"></i><b>3.4</b> More complex <code>dplyr</code> examples</a><ul>
<li class="chapter" data-level="3.4.1" data-path="dataskills2.html"><a href="dataskills2.html#tree-growth-data-filter-and-multiple-groupings"><i class="fa fa-check"></i><b>3.4.1</b> Tree growth data: filter and multiple groupings</a></li>
<li class="chapter" data-level="3.4.2" data-path="dataskills2.html"><a href="dataskills2.html#crude-oil-production-find-top-exporters"><i class="fa fa-check"></i><b>3.4.2</b> Crude oil production: find top exporters</a></li>
<li class="chapter" data-level="3.4.3" data-path="dataskills2.html"><a href="dataskills2.html#weightlossdplyr"><i class="fa fa-check"></i><b>3.4.3</b> Weight loss data: make an irregular timeseries regular</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="dataskills2.html"><a href="dataskills2.html#exercises-2"><i class="fa fa-check"></i><b>3.5</b> Exercises</a><ul>
<li class="chapter" data-level="3.5.1" data-path="dataskills2.html"><a href="dataskills2.html#summarizing-the-cereal-data"><i class="fa fa-check"></i><b>3.5.1</b> Summarizing the cereal data</a></li>
<li class="chapter" data-level="3.5.2" data-path="dataskills2.html"><a href="dataskills2.html#words-and-the-weather"><i class="fa fa-check"></i><b>3.5.2</b> Words and the weather</a></li>
<li class="chapter" data-level="3.5.3" data-path="dataskills2.html"><a href="dataskills2.html#merging-data"><i class="fa fa-check"></i><b>3.5.3</b> Merging data</a></li>
<li class="chapter" data-level="3.5.4" data-path="dataskills2.html"><a href="dataskills2.html#merging-multiple-datasets"><i class="fa fa-check"></i><b>3.5.4</b> Merging multiple datasets</a></li>
<li class="chapter" data-level="3.5.5" data-path="dataskills2.html"><a href="dataskills2.html#ordered-boxplot"><i class="fa fa-check"></i><b>3.5.5</b> Ordered boxplot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>4</b> Functions, lists and loops</a><ul>
<li class="chapter" data-level="4.1" data-path="programming.html"><a href="programming.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="programming.html"><a href="programming.html#writefunctions"><i class="fa fa-check"></i><b>4.2</b> Writing functions</a><ul>
<li class="chapter" data-level="4.2.1" data-path="programming.html"><a href="programming.html#returning-results"><i class="fa fa-check"></i><b>4.2.1</b> Returning results</a></li>
<li class="chapter" data-level="4.2.2" data-path="programming.html"><a href="programming.html#functions-without-arguments"><i class="fa fa-check"></i><b>4.2.2</b> Functions without arguments</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="programming.html"><a href="programming.html#workinglists"><i class="fa fa-check"></i><b>4.3</b> Working with lists</a><ul>
<li class="chapter" data-level="4.3.1" data-path="programming.html"><a href="programming.html#indexing-lists"><i class="fa fa-check"></i><b>4.3.1</b> Indexing lists</a></li>
<li class="chapter" data-level="4.3.2" data-path="programming.html"><a href="programming.html#converting-lists-to-dataframes-or-vectors"><i class="fa fa-check"></i><b>4.3.2</b> Converting lists to dataframes or vectors</a></li>
<li class="chapter" data-level="4.3.3" data-path="programming.html"><a href="programming.html#combining-lists"><i class="fa fa-check"></i><b>4.3.3</b> Combining lists</a></li>
<li class="chapter" data-level="4.3.4" data-path="programming.html"><a href="programming.html#extracting-output-from-built-in-functions"><i class="fa fa-check"></i><b>4.3.4</b> Extracting output from built-in functions</a></li>
<li class="chapter" data-level="4.3.5" data-path="programming.html"><a href="programming.html#dfrlists"><i class="fa fa-check"></i><b>4.3.5</b> Creating lists from dataframes</a></li>
<li class="chapter" data-level="4.3.6" data-path="programming.html"><a href="programming.html#lapply"><i class="fa fa-check"></i><b>4.3.6</b> Applying functions to lists</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="programming.html"><a href="programming.html#simpleloops"><i class="fa fa-check"></i><b>4.4</b> Loops</a><ul>
<li class="chapter" data-level="4.4.1" data-path="programming.html"><a href="programming.html#better-indexing"><i class="fa fa-check"></i><b>4.4.1</b> Better indexing</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="programming.html"><a href="programming.html#functionsadvanced"><i class="fa fa-check"></i><b>4.5</b> Functions : advanced concepts</a><ul>
<li class="chapter" data-level="4.5.1" data-path="programming.html"><a href="programming.html#why-should-i-write-more-functions"><i class="fa fa-check"></i><b>4.5.1</b> Why should I write more functions?</a></li>
<li class="chapter" data-level="4.5.2" data-path="programming.html"><a href="programming.html#wrapfunctions"><i class="fa fa-check"></i><b>4.5.2</b> Wrapper functions</a></li>
<li class="chapter" data-level="4.5.3" data-path="programming.html"><a href="programming.html#wrapper-functions-to-ggplot2-or-dplyr"><i class="fa fa-check"></i><b>4.5.3</b> Wrapper functions to <code>ggplot2</code> or <code>dplyr</code></a></li>
<li class="chapter" data-level="4.5.4" data-path="programming.html"><a href="programming.html#functions-that-take-vectors-as-input"><i class="fa fa-check"></i><b>4.5.4</b> Functions that take vectors as input</a></li>
<li class="chapter" data-level="4.5.5" data-path="programming.html"><a href="programming.html#if-then-else-switch"><i class="fa fa-check"></i><b>4.5.5</b> If, then, else … switch</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="programming.html"><a href="programming.html#defensive"><i class="fa fa-check"></i><b>4.6</b> Robust functions: defensive programming</a><ul>
<li class="chapter" data-level="4.6.1" data-path="programming.html"><a href="programming.html#argument-matching"><i class="fa fa-check"></i><b>4.6.1</b> Argument matching</a></li>
<li class="chapter" data-level="4.6.2" data-path="programming.html"><a href="programming.html#argument-checking"><i class="fa fa-check"></i><b>4.6.2</b> Argument checking</a></li>
<li class="chapter" data-level="4.6.3" data-path="programming.html"><a href="programming.html#sending-warnings-errors-messages"><i class="fa fa-check"></i><b>4.6.3</b> Sending warnings, errors, messages</a></li>
<li class="chapter" data-level="4.6.4" data-path="programming.html"><a href="programming.html#onexit"><i class="fa fa-check"></i><b>4.6.4</b> Executing code when the function ends (or fails)</a></li>
<li class="chapter" data-level="4.6.5" data-path="programming.html"><a href="programming.html#try"><i class="fa fa-check"></i><b>4.6.5</b> Catch errors with <code>try</code></a></li>
<li class="chapter" data-level="4.6.6" data-path="programming.html"><a href="programming.html#dbiwrappers"><i class="fa fa-check"></i><b>4.6.6</b> Writing database wrapper functions</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="programming.html"><a href="programming.html#exercises-3"><i class="fa fa-check"></i><b>4.7</b> Exercises</a><ul>
<li class="chapter" data-level="4.7.1" data-path="programming.html"><a href="programming.html#writing-functions"><i class="fa fa-check"></i><b>4.7.1</b> Writing functions</a></li>
<li class="chapter" data-level="4.7.2" data-path="programming.html"><a href="programming.html#working-with-lists"><i class="fa fa-check"></i><b>4.7.2</b> Working with lists</a></li>
<li class="chapter" data-level="4.7.3" data-path="programming.html"><a href="programming.html#functions-for-histograms"><i class="fa fa-check"></i><b>4.7.3</b> Functions for histograms</a></li>
<li class="chapter" data-level="4.7.4" data-path="programming.html"><a href="programming.html#using-functions-to-make-many-plots"><i class="fa fa-check"></i><b>4.7.4</b> Using functions to make many plots</a></li>
<li class="chapter" data-level="4.7.5" data-path="programming.html"><a href="programming.html#monthly-weather-plots"><i class="fa fa-check"></i><b>4.7.5</b> Monthly weather plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="webservices.html"><a href="webservices.html"><i class="fa fa-check"></i><b>5</b> R on the web</a><ul>
<li class="chapter" data-level="5.1" data-path="webservices.html"><a href="webservices.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="webservices.html"><a href="webservices.html#reading-data-from-remote-databases"><i class="fa fa-check"></i><b>5.2</b> Reading data from remote databases</a><ul>
<li class="chapter" data-level="5.2.1" data-path="webservices.html"><a href="webservices.html#dbi"><i class="fa fa-check"></i><b>5.2.1</b> Accessing databases with the DBI package</a></li>
<li class="chapter" data-level="5.2.2" data-path="webservices.html"><a href="webservices.html#nosql"><i class="fa fa-check"></i><b>5.2.2</b> NoSQL</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="webservices.html"><a href="webservices.html#accessing-an-api"><i class="fa fa-check"></i><b>5.3</b> Accessing an API</a></li>
<li class="chapter" data-level="5.4" data-path="webservices.html"><a href="webservices.html#deploying-an-api-with-plumber"><i class="fa fa-check"></i><b>5.4</b> Deploying an API with <code>plumber</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="versioncontrol.html"><a href="versioncontrol.html"><i class="fa fa-check"></i><b>6</b> Version control with git</a><ul>
<li class="chapter" data-level="6.1" data-path="versioncontrol.html"><a href="versioncontrol.html#shouldigit"><i class="fa fa-check"></i><b>6.1</b> Should I learn version control?</a></li>
<li class="chapter" data-level="6.2" data-path="versioncontrol.html"><a href="versioncontrol.html#basics-of-git"><i class="fa fa-check"></i><b>6.2</b> Basics of git</a><ul>
<li class="chapter" data-level="6.2.1" data-path="versioncontrol.html"><a href="versioncontrol.html#basic-principles"><i class="fa fa-check"></i><b>6.2.1</b> Basic principles</a></li>
<li class="chapter" data-level="6.2.2" data-path="versioncontrol.html"><a href="versioncontrol.html#installing-git"><i class="fa fa-check"></i><b>6.2.2</b> Installing git</a></li>
<li class="chapter" data-level="6.2.3" data-path="versioncontrol.html"><a href="versioncontrol.html#using-git-in-rstudio"><i class="fa fa-check"></i><b>6.2.3</b> Using git in Rstudio</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="versioncontrol.html"><a href="versioncontrol.html#localgit"><i class="fa fa-check"></i><b>6.3</b> Local git repositories</a><ul>
<li class="chapter" data-level="6.3.1" data-path="versioncontrol.html"><a href="versioncontrol.html#firstgitsession"><i class="fa fa-check"></i><b>6.3.1</b> A first session with version control in Rstudio</a></li>
<li class="chapter" data-level="6.3.2" data-path="versioncontrol.html"><a href="versioncontrol.html#deleting-files-and-sensitive-information"><i class="fa fa-check"></i><b>6.3.2</b> Deleting files and sensitive information</a></li>
<li class="chapter" data-level="6.3.3" data-path="versioncontrol.html"><a href="versioncontrol.html#reverting-changes"><i class="fa fa-check"></i><b>6.3.3</b> Reverting changes</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="versioncontrol.html"><a href="versioncontrol.html#remotegit"><i class="fa fa-check"></i><b>6.4</b> Remote git repositories</a><ul>
<li class="chapter" data-level="6.4.1" data-path="versioncontrol.html"><a href="versioncontrol.html#makeremotegit"><i class="fa fa-check"></i><b>6.4.1</b> Making a remote repository</a></li>
<li class="chapter" data-level="6.4.2" data-path="versioncontrol.html"><a href="versioncontrol.html#gitremoteworkflow"><i class="fa fa-check"></i><b>6.4.2</b> Workflow</a></li>
<li class="chapter" data-level="6.4.3" data-path="versioncontrol.html"><a href="versioncontrol.html#a-session-with-a-remote-repository"><i class="fa fa-check"></i><b>6.4.3</b> A session with a remote repository</a></li>
<li class="chapter" data-level="6.4.4" data-path="versioncontrol.html"><a href="versioncontrol.html#conflicts-when-collaborating"><i class="fa fa-check"></i><b>6.4.4</b> Conflicts when collaborating</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="versioncontrol.html"><a href="versioncontrol.html#gitignore"><i class="fa fa-check"></i><b>6.5</b> Ignoring files</a></li>
<li class="chapter" data-level="6.6" data-path="versioncontrol.html"><a href="versioncontrol.html#commandline"><i class="fa fa-check"></i><b>6.6</b> Using the command line</a><ul>
<li class="chapter" data-level="6.6.1" data-path="versioncontrol.html"><a href="versioncontrol.html#basic-commands"><i class="fa fa-check"></i><b>6.6.1</b> Basic commands</a></li>
<li class="chapter" data-level="6.6.2" data-path="versioncontrol.html"><a href="versioncontrol.html#useful-tasks"><i class="fa fa-check"></i><b>6.6.2</b> Useful tasks</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="versioncontrol.html"><a href="versioncontrol.html#branches"><i class="fa fa-check"></i><b>6.7</b> Branches</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="projectman.html"><a href="projectman.html"><i class="fa fa-check"></i><b>7</b> Project management and workflow</a><ul>
<li class="chapter" data-level="7.1" data-path="projectman.html"><a href="projectman.html#tips-on-organizing-your-code"><i class="fa fa-check"></i><b>7.1</b> Tips on organizing your code</a></li>
<li class="chapter" data-level="7.2" data-path="projectman.html"><a href="projectman.html#rstudioprojects"><i class="fa fa-check"></i><b>7.2</b> Set up a project in Rstudio</a></li>
<li class="chapter" data-level="7.3" data-path="projectman.html"><a href="projectman.html#directory-structure"><i class="fa fa-check"></i><b>7.3</b> Directory structure</a><ul>
<li class="chapter" data-level="7.3.1" data-path="projectman.html"><a href="projectman.html#rawdata"><i class="fa fa-check"></i><b>7.3.1</b> <code>rawdata</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="projectman.html"><a href="projectman.html#rfunctions"><i class="fa fa-check"></i><b>7.3.2</b> <code>Rfunctions</code></a></li>
<li class="chapter" data-level="7.3.3" data-path="projectman.html"><a href="projectman.html#output"><i class="fa fa-check"></i><b>7.3.3</b> <code>output</code></a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="projectman.html"><a href="projectman.html#the-r-scripts"><i class="fa fa-check"></i><b>7.4</b> The R scripts</a><ul>
<li class="chapter" data-level="7.4.1" data-path="projectman.html"><a href="projectman.html#facesoil_analysis.r"><i class="fa fa-check"></i><b>7.4.1</b> <code>facesoil_analysis.R</code></a></li>
<li class="chapter" data-level="7.4.2" data-path="projectman.html"><a href="projectman.html#facesoil_figures.r"><i class="fa fa-check"></i><b>7.4.2</b> <code>facesoil_figures.R</code></a></li>
<li class="chapter" data-level="7.4.3" data-path="projectman.html"><a href="projectman.html#facesoil_load"><i class="fa fa-check"></i><b>7.4.3</b> <code>facesoil_load</code></a></li>
<li class="chapter" data-level="7.4.4" data-path="projectman.html"><a href="projectman.html#load_packages.r"><i class="fa fa-check"></i><b>7.4.4</b> <code>load_packages.R</code></a></li>
<li class="chapter" data-level="7.4.5" data-path="projectman.html"><a href="projectman.html#facesoil_readdata.r"><i class="fa fa-check"></i><b>7.4.5</b> <code>facesoil_readdata.R</code></a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="projectman.html"><a href="projectman.html#archiving-the-output"><i class="fa fa-check"></i><b>7.5</b> Archiving the output</a><ul>
<li class="chapter" data-level="7.5.1" data-path="projectman.html"><a href="projectman.html#adding-a-date-stamp-to-output-files"><i class="fa fa-check"></i><b>7.5.1</b> Adding a Date stamp to output files</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="projectman.html"><a href="projectman.html#scriptstructure"><i class="fa fa-check"></i><b>7.6</b> A logical structure for your scripts</a><ul>
<li class="chapter" data-level="7.6.1" data-path="projectman.html"><a href="projectman.html#write-functions-not-long-scripts"><i class="fa fa-check"></i><b>7.6.1</b> Write functions, not long scripts</a></li>
<li class="chapter" data-level="7.6.2" data-path="projectman.html"><a href="projectman.html#divide-your-script-into-functional-blocks"><i class="fa fa-check"></i><b>7.6.2</b> Divide your script into functional blocks</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="masteringpackages.html"><a href="masteringpackages.html"><i class="fa fa-check"></i><b>8</b> Mastering package dependencies</a><ul>
<li class="chapter" data-level="8.1" data-path="masteringpackages.html"><a href="masteringpackages.html#what-version"><i class="fa fa-check"></i><b>8.1</b> What version?</a></li>
<li class="chapter" data-level="8.2" data-path="masteringpackages.html"><a href="masteringpackages.html#all-packages-loaded-or-installed"><i class="fa fa-check"></i><b>8.2</b> All packages: loaded or installed</a></li>
<li class="chapter" data-level="8.3" data-path="masteringpackages.html"><a href="masteringpackages.html#avoidconflicts"><i class="fa fa-check"></i><b>8.3</b> Avoiding conflicts</a></li>
<li class="chapter" data-level="8.4" data-path="masteringpackages.html"><a href="masteringpackages.html#searchpath"><i class="fa fa-check"></i><b>8.4</b> The search path and conflicts</a></li>
<li class="chapter" data-level="8.5" data-path="masteringpackages.html"><a href="masteringpackages.html#bundling-package-dependencies-with-renv"><i class="fa fa-check"></i><b>8.5</b> Bundling package dependencies with <code>renv</code></a></li>
<li class="chapter" data-level="8.6" data-path="masteringpackages.html"><a href="masteringpackages.html#minimizing-package-dependencies"><i class="fa fa-check"></i><b>8.6</b> Minimizing package dependencies</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Learning Guide to R: data, analytical, and programming skills.</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="projectman" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Project management and workflow</h1>
<div id="tips-on-organizing-your-code" class="section level2">
<h2><span class="header-section-number">7.1</span> Tips on organizing your code</h2>
<p>In this chapter, we present a few tips on how to improve your workflow and organization of scripts, functions, raw data, and outputs (figures, processed data, etc.). The structure that we present below is just an example, and will depend on the particular project, your requirements, how much time you have, and personal preference.</p>
<p>The main <strong>challenge</strong> in developing more complex workflows, where you have multiple data sources, scripts for various analyses, and outputs of various kinds (figures, markdown documents, prepared data etc.) is to keep things organized, avoid <em>clutter</em>, and make sure you know how the outputs were produced.</p>
<p>All projects are different, and we encourage you to experiment with different workflows and organization of your script(s) and outputs.</p>
<p>The following is a <strong>rule of thumb</strong> list for R project management:</p>
<ul>
<li>Use ‘projects’ in Rstudio to manage your files and workspace.</li>
<li>Use <em>git</em> version control (see Chapter <a href="versioncontrol.html#versioncontrol">6</a>).</li>
<li>Use a logical folder structure inside your projects, keeping similar files together (data, scripts, output, etc.).</li>
<li>Avoid writing long scripts, instead break them into a logical collection of shorter scripts.</li>
<li>Load all required packages in a separate script.</li>
<li>Outputs (figures, processed datasets) are <em>disposable</em>, your scripts can always re-produce the output.</li>
<li>Keep function declarations separate from other code.</li>
<li>Write functions as much as possible.</li>
<li>Add a ‘README.md’ file to your project, markdown-formatted file explaining what the project does, a list of any dependencies, how to run the code, where to find the output, etc.</li>
</ul>
<p>In this chapter we show an example project structure, which uses most of the above rules to come up with a transparent project workflow. If you follow (something like) the structure we show here, you have the added benefit that your directory is fully portable. That is, you can zip it, email it to someone, they can unzip it and run the entire analysis.</p>
<p>For effective project management we find using custom functions to organize our work most useful. See Chapter <a href="programming.html#programming">4</a> for general introduction to functions, and Section <a href="projectman.html#scriptstructure">7.6</a> on how to organize your code with functions.</p>
</div>
<div id="rstudioprojects" class="section level2">
<h2><span class="header-section-number">7.2</span> Set up a project in Rstudio</h2>
<p>The most important tip is to <em>use projects in Rstudio</em>. Projects are an efficient method to keep your files organized, and to keep all your different projects separated. There is a natural tendency for analyses to grow over time, to the point where they become too large to manage properly. The way we usually deal with this is to try to split projects into smaller ones, even if there is some overlap between them.</p>

<div class="rmdcaution">
<p>Stop using <code>setwd()</code> in any of your scripts. This is never a good idea, for various reasons. Instead use Rstudio projects as a way to set the working directory automatically (and cleanly).</p>
You can also stop using <code>rm(list=ls())</code> in any of your scripts. The problem with this command is that it does not clean <em>everything</em> : all packages are still loaded, and hidden objects also remain (ones starting with <code>.</code>), and certain <code>options</code> may have been set. Instead, test reproducing your project by selecting <code>Session/Restart R</code> and running the project.
</div>

<p>In Rstudio, click on the menu item <code>File/New Project...</code>. If you already have a folder for the project, take the 2nd option (<code>Existing directory</code>), otherwise create a folder as well by choosing the 1st option (<code>New project</code>). We will discuss “version control” in the next chapter.</p>
<p>Browse for the directory you want to create a project in, and click <code>Choose</code>. This creates a file with extension <code>.Rproj</code>. Whenever you open this project, Rstudio will set the working directory to the location of the project file. If you use projects, you no longer need to set the working directory manually as we showed in Section <a href="intro.html#fileswd">1.8</a>.</p>
<p>Rstudio has now switched to your new project. Notice in the top-right corner there is a button that shows the current project. For the example project ‘facesoil’, it looks like this:</p>
<p><img src="screenshots/projectbutton.png" width="30%" /></p>
<p><strong>The Project button in Rstudio</strong></p>
<p>By clicking on that button you can easily switch over to other projects. The working directory is automatically set to the right place, and all files you had open last time are remembered as well. As an additional bonus, the workspace is also cleared. This ensures that if you switch projects, you do not inadvertently load objects from another project.</p>
</div>
<div id="directory-structure" class="section level2">
<h2><span class="header-section-number">7.3</span> Directory structure</h2>
<p>For the ‘facesoil’ project, we came up with the following directory structure. Each item is described further below.</p>
<p><img src="screenshots/folderstructure.png" width="70%" /></p>
<p><strong>Folder structure; just an example</strong></p>
<div id="rawdata" class="section level3">
<h3><span class="header-section-number">7.3.1</span> <code>rawdata</code></h3>
<p>If your project contains any raw data files (within ) <em>keep your raw data separate from everything else</em>. Here we have placed our raw CSV files in the <code>rawdata</code> directory.</p>
<p>In some projects it makes sense to further keep raw data files separate from each other, for example you might have subfolders in the rawdata folder that contain different types of datasets (e.g. ‘rawdata/leafdata’, ‘rawdata/isotopes’). Again, the actual solution will depend on your situation, but it is at least very good practice to store your raw data files in a separate folder.</p>
</div>
<div id="rfunctions" class="section level3">
<h3><span class="header-section-number">7.3.2</span> <code>Rfunctions</code></h3>
<p>If you do not frequently write functions already, you should force yourself to do so. Particularly for tasks that you do more than once, functions can greatly improve the clarity of your scripts, helps you avoid mistakes, and makes it easier to reuse code in another project.</p>
<p>It is good practice to keep functions in a separate folder, for example <code>Rfunctions</code>, with each function in a separate file (with the extension <code>.R</code>). It may look like this,</p>
<p><img src="screenshots/rfunctions.png" width="70%" /></p>
<p><strong>Contents of Rfunctions folder, example.</strong></p>
<p>We will use <code>source()</code> to load these functions, see further below.</p>
</div>
<div id="output" class="section level3">
<h3><span class="header-section-number">7.3.3</span> <code>output</code></h3>
<p>It is a good idea to send all output from your R scripts to a separate folder. This way, it is very clear what the <em>outputs</em> of the analysis are. It may also be useful to have subfolders specifying what type of output it is. Here we decided to split it into figures, processeddata, and text :</p>
<p><img src="screenshots/output.png" width="70%" /></p>
<p><strong>Contents of output folder, example.</strong></p>
</div>
</div>
<div id="the-r-scripts" class="section level2">
<h2><span class="header-section-number">7.4</span> The R scripts</h2>
<p>A few example scripts are described in the following sections. Note that these are just examples, the actual setup will depend on your situation, and your personal preferences. The main point to make here is that it is tremendously useful to separate your code into a number of separate scripts. This makes it easier to maintain your code, and for an outsider to follow the logic of your workflow.</p>
<div id="facesoil_analysis.r" class="section level3">
<h3><span class="header-section-number">7.4.1</span> <code>facesoil_analysis.R</code></h3>
<p>This is our ‘master’ script of the project. It calls (i.e., executes) a couple of scripts using <code>source</code>. First, it ‘sources’ the <code>facesoil\_load.R</code> script, which loads packages and functions, and reads raw data. Next, we do some analyses (here is a simple example where we calculate daily averages), and call a script that makes the figures (<code>facesoil_figures.R</code>).</p>
<p>Note how we direct all output to the <code>output</code> folder, by specifying the <em>relative path</em>, that is, the path relative to the current working directory.</p>
<div class="sourceCode" id="cb754"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb754-1"><a href="projectman.html#cb754-1"></a><span class="co"># Calls the load script.</span></span>
<span id="cb754-2"><a href="projectman.html#cb754-2"></a><span class="kw">source</span>(<span class="st">&quot;facesoil_load.R&quot;</span>)</span>
<span id="cb754-3"><a href="projectman.html#cb754-3"></a></span>
<span id="cb754-4"><a href="projectman.html#cb754-4"></a><span class="co"># Export processed data</span></span>
<span id="cb754-5"><a href="projectman.html#cb754-5"></a><span class="kw">write.csv</span>(allTheta, <span class="st">&quot;output/processeddata/facesoil_allTheta.csv&quot;</span>,</span>
<span id="cb754-6"><a href="projectman.html#cb754-6"></a>          <span class="dt">row.names=</span><span class="ot">FALSE</span>)</span>
<span id="cb754-7"><a href="projectman.html#cb754-7"></a></span>
<span id="cb754-8"><a href="projectman.html#cb754-8"></a><span class="co">## Aggregate by day</span></span>
<span id="cb754-9"><a href="projectman.html#cb754-9"></a></span>
<span id="cb754-10"><a href="projectman.html#cb754-10"></a><span class="co"># Make daily data</span></span>
<span id="cb754-11"><a href="projectman.html#cb754-11"></a>allTheta<span class="op">$</span>Date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(allTheta<span class="op">$</span>DateTime)</span>
<span id="cb754-12"><a href="projectman.html#cb754-12"></a>allTheta_agg &lt;-<span class="st"> </span><span class="kw">summaryBy</span>(. <span class="op">~</span><span class="st"> </span>Date <span class="op">+</span><span class="st"> </span>Ringnr, <span class="dt">data=</span>allTheta,</span>
<span id="cb754-13"><a href="projectman.html#cb754-13"></a>                          <span class="dt">FUN=</span>mean, <span class="dt">keep.names=</span><span class="ot">TRUE</span>)</span>
<span id="cb754-14"><a href="projectman.html#cb754-14"></a></span>
<span id="cb754-15"><a href="projectman.html#cb754-15"></a><span class="co"># Export daily data</span></span>
<span id="cb754-16"><a href="projectman.html#cb754-16"></a><span class="kw">write.csv</span>(allTheta_agg, <span class="st">&quot;output/processeddata/facesoil_alltheta_daily.csv&quot;</span>,</span>
<span id="cb754-17"><a href="projectman.html#cb754-17"></a>          <span class="dt">row.names=</span><span class="ot">FALSE</span>)</span>
<span id="cb754-18"><a href="projectman.html#cb754-18"></a></span>
<span id="cb754-19"><a href="projectman.html#cb754-19"></a><span class="co">## make figures</span></span>
<span id="cb754-20"><a href="projectman.html#cb754-20"></a><span class="kw">source</span>(<span class="st">&quot;figures.R&quot;</span>)</span></code></pre></div>
</div>
<div id="facesoil_figures.r" class="section level3">
<h3><span class="header-section-number">7.4.2</span> <code>facesoil_figures.R</code></h3>
<p>In this example we make the figures in a separate script. If your project is quite small, perhaps this makes little sense. When projects grow in size, though, I have found that collecting the code that makes the figures in a separate script really helps to avoid clutter.</p>
<p>Also, you could have a number of different ‘figure’ scripts, one for each ‘sub-analysis’ of your project. These can then be sourced in the master script (here <code>facesoil\_analysis.R</code>), for example, to maintain a transparent workflow.</p>
<p>Here is an example script that makes figures only. Note the use of <code>dev.copy2pdf</code>, which will produce a PDF and place it in the <code>output/figures</code> directory.</p>
<div class="sourceCode" id="cb755"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb755-1"><a href="projectman.html#cb755-1"></a><span class="co"># Make a plot of soil water content over time</span></span>
<span id="cb755-2"><a href="projectman.html#cb755-2"></a><span class="kw">pdf</span>(<span class="st">&quot;./output/figures/facesoil_overtime.pdf&quot;</span>)</span>
<span id="cb755-3"><a href="projectman.html#cb755-3"></a><span class="kw">with</span>(allTheta, <span class="kw">plot</span>(DateTime, R30.mean, <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">cex=</span><span class="fl">0.2</span>,</span>
<span id="cb755-4"><a href="projectman.html#cb755-4"></a>                    <span class="dt">col=</span>Ringnr))</span>
<span id="cb755-5"><a href="projectman.html#cb755-5"></a><span class="kw">dev.off</span>()</span>
<span id="cb755-6"><a href="projectman.html#cb755-6"></a></span>
<span id="cb755-7"><a href="projectman.html#cb755-7"></a><span class="co"># More figures go here!</span></span></code></pre></div>
<p>The above is OK, but we can do better by writing it into a function, and then calling it to make the PDF. Even better, the PDF making can be done Here we also use <code>on.exit</code> to safely close the PDF, see Section @ref(onexit.</p>
<p>Like so,</p>
<div class="sourceCode" id="cb756"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb756-1"><a href="projectman.html#cb756-1"></a><span class="co"># A function that defines our plot</span></span>
<span id="cb756-2"><a href="projectman.html#cb756-2"></a><span class="co"># Write functions like these, and collect them in a separate script,</span></span>
<span id="cb756-3"><a href="projectman.html#cb756-3"></a><span class="co"># for example &quot;figure_definitions.R&quot;.</span></span>
<span id="cb756-4"><a href="projectman.html#cb756-4"></a>soilplot_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="cf">function</span>(data){</span>
<span id="cb756-5"><a href="projectman.html#cb756-5"></a>  <span class="kw">with</span>(data, <span class="kw">plot</span>(DateTime, R30.mean, <span class="dt">pch=</span><span class="dv">19</span>, <span class="dt">cex=</span><span class="fl">0.2</span>,</span>
<span id="cb756-6"><a href="projectman.html#cb756-6"></a>                    <span class="dt">col=</span>Ringnr))  </span>
<span id="cb756-7"><a href="projectman.html#cb756-7"></a>}</span>
<span id="cb756-8"><a href="projectman.html#cb756-8"></a></span>
<span id="cb756-9"><a href="projectman.html#cb756-9"></a><span class="co"># A generic function that makes a PDF of a provided function call</span></span>
<span id="cb756-10"><a href="projectman.html#cb756-10"></a><span class="co"># Place this function in a script with a collection of functions.</span></span>
<span id="cb756-11"><a href="projectman.html#cb756-11"></a>to.pdf &lt;-<span class="st"> </span><span class="cf">function</span>(expr, filename, ...) {</span>
<span id="cb756-12"><a href="projectman.html#cb756-12"></a>  </span>
<span id="cb756-13"><a href="projectman.html#cb756-13"></a>  <span class="kw">pdf</span>(filename, ...)</span>
<span id="cb756-14"><a href="projectman.html#cb756-14"></a>  <span class="kw">on.exit</span>(<span class="kw">dev.off</span>())</span>
<span id="cb756-15"><a href="projectman.html#cb756-15"></a>  </span>
<span id="cb756-16"><a href="projectman.html#cb756-16"></a>  <span class="co"># A trick to run the provided function call in the global environment</span></span>
<span id="cb756-17"><a href="projectman.html#cb756-17"></a>  <span class="kw">eval.parent</span>(<span class="kw">substitute</span>(expr))</span>
<span id="cb756-18"><a href="projectman.html#cb756-18"></a>}</span>
<span id="cb756-19"><a href="projectman.html#cb756-19"></a></span>
<span id="cb756-20"><a href="projectman.html#cb756-20"></a></span>
<span id="cb756-21"><a href="projectman.html#cb756-21"></a><span class="co"># Finally, after having sourced both our function definition, </span></span>
<span id="cb756-22"><a href="projectman.html#cb756-22"></a><span class="co"># and the generic function to.pdf, we can make the PDFs.</span></span>
<span id="cb756-23"><a href="projectman.html#cb756-23"></a><span class="kw">to.pdf</span>(</span>
<span id="cb756-24"><a href="projectman.html#cb756-24"></a>  <span class="kw">soilplot_1</span>(allTheta), </span>
<span id="cb756-25"><a href="projectman.html#cb756-25"></a>  <span class="dt">filename =</span> <span class="st">&quot;output/figures/figure1.pdf&quot;</span></span>
<span id="cb756-26"><a href="projectman.html#cb756-26"></a>)</span></code></pre></div>
</div>
<div id="facesoil_load" class="section level3">
<h3><span class="header-section-number">7.4.3</span> <code>facesoil_load</code></h3>
<p>This script contains all the bits of code that are</p>
<ul>
<li>Cleaning the workspace</li>
<li>Loading homemade functions</li>
<li>Reading and pre-processing the raw data</li>
</ul>
<p>It is useful to load all packages in one location in your, which makes it easy to fix problems should they arise (i.e., some packages are not installed, or not available).</p>
<div class="sourceCode" id="cb757"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb757-1"><a href="projectman.html#cb757-1"></a><span class="co"># Load packages</span></span>
<span id="cb757-2"><a href="projectman.html#cb757-2"></a><span class="kw">source</span>(<span class="st">&quot;load_packages.R&quot;</span>)</span>
<span id="cb757-3"><a href="projectman.html#cb757-3"></a></span>
<span id="cb757-4"><a href="projectman.html#cb757-4"></a><span class="co"># Source functions (this loads functions but does no actual work)</span></span>
<span id="cb757-5"><a href="projectman.html#cb757-5"></a><span class="kw">source</span>(<span class="st">&quot;Rfunctions/rmDup.R&quot;</span>)</span>
<span id="cb757-6"><a href="projectman.html#cb757-6"></a></span>
<span id="cb757-7"><a href="projectman.html#cb757-7"></a><span class="co"># Make the processed data (this runs a script)</span></span>
<span id="cb757-8"><a href="projectman.html#cb757-8"></a><span class="kw">source</span>(<span class="st">&quot;facesoil_readdata.R&quot;</span>)</span></code></pre></div>
</div>
<div id="load_packages.r" class="section level3">
<h3><span class="header-section-number">7.4.4</span> <code>load_packages.R</code></h3>
<p>We find it very convenient to collect all <code>library</code> calls throughout your project in a single script. The advantage is that at the top of one of the main analysis scripts, we can simply call <code>source("load_packages.R")</code>. If any packages are missing, or something else failed, we know before try to we execute any other code.</p>
<p>It may also be convenient to suppress all messages we see when loading packages. An example script may look like:</p>
<div class="sourceCode" id="cb758"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb758-1"><a href="projectman.html#cb758-1"></a><span class="kw">suppressPackageStartupMessages</span>({</span>
<span id="cb758-2"><a href="projectman.html#cb758-2"></a>  <span class="kw">library</span>(dplyr)</span>
<span id="cb758-3"><a href="projectman.html#cb758-3"></a>  <span class="kw">library</span>(lubridate)</span>
<span id="cb758-4"><a href="projectman.html#cb758-4"></a>  <span class="kw">library</span>(glue)</span>
<span id="cb758-5"><a href="projectman.html#cb758-5"></a>})</span></code></pre></div>
<p>The <em>disadvantage</em> of a loading script like this is that we assume that the user has installed all of the required packages. In Rstudio, however, if you open this script - a small message will appear at the top of the script, “Would you like to install missing packages?”. If you click OK all packages mentioned in the script that you have not installed will be installed for you.</p>
<p>Another approach uses the <code>pacman</code> package, which automatically installs missing packages (see also Section <a href="intro.html#pacman">1.10.9</a>):</p>
<div class="sourceCode" id="cb759"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb759-1"><a href="projectman.html#cb759-1"></a><span class="cf">if</span>(<span class="op">!</span><span class="kw">require</span>(pacman))<span class="kw">install.packages</span>(<span class="st">&quot;pacman&quot;</span>)</span></code></pre></div>
<pre><code>## Loading required package: pacman</code></pre>
<div class="sourceCode" id="cb761"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb761-1"><a href="projectman.html#cb761-1"></a>pacman<span class="op">::</span><span class="kw">p_load</span>(gplots, geometry, rgl, remotes, svglite)</span></code></pre></div>

<div class="rmdreading">
To learn more about advanced management of R package dependencies, read Chapter <a href="masteringpackages.html#masteringpackages">8</a>
</div>


<div class="rmdcaution">
Never include <code>install.packages</code> in any of your <em>scripts</em> in your project. You do not want to call it more than once, otherwise the execution of the project will be much slower (and require an internet connection).
</div>

</div>
<div id="facesoil_readdata.r" class="section level3">
<h3><span class="header-section-number">7.4.5</span> <code>facesoil_readdata.R</code></h3>
<p>This script produces a dataframe based on the raw CSV files in the <code>rawdata</code> folder. The example below just reads a dataset and changes the DateTime variable to a POSIXct class. In this script, I normally also do all the tedious things like deleting missing data, converting dates and times, merging, adding new variables, and so on. The advantage of placing all of this in a separate script is that you keep the boring bits separate from the code that generates results, such as figures, tables, and analyses.</p>
<div class="sourceCode" id="cb762"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb762-1"><a href="projectman.html#cb762-1"></a><span class="co"># Read raw data from &#39;rawdata&#39; subfolder</span></span>
<span id="cb762-2"><a href="projectman.html#cb762-2"></a>allTheta &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;rawdata/FACE_SOIL_theta_2013.csv&quot;</span>)</span>
<span id="cb762-3"><a href="projectman.html#cb762-3"></a></span>
<span id="cb762-4"><a href="projectman.html#cb762-4"></a><span class="co"># Convert DateTime</span></span>
<span id="cb762-5"><a href="projectman.html#cb762-5"></a>allTheta<span class="op">$</span>DateTime &lt;-<span class="st"> </span><span class="kw">ymd_hms</span>(<span class="kw">as.character</span>(allTheta<span class="op">$</span>DateTime))</span>
<span id="cb762-6"><a href="projectman.html#cb762-6"></a></span>
<span id="cb762-7"><a href="projectman.html#cb762-7"></a><span class="co"># Add Date</span></span>
<span id="cb762-8"><a href="projectman.html#cb762-8"></a>allTheta<span class="op">$</span>Date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(allTheta<span class="op">$</span>DateTime)</span>
<span id="cb762-9"><a href="projectman.html#cb762-9"></a></span>
<span id="cb762-10"><a href="projectman.html#cb762-10"></a><span class="co"># Etc.</span></span></code></pre></div>
</div>
</div>
<div id="archiving-the-output" class="section level2">
<h2><span class="header-section-number">7.5</span> Archiving the output</h2>
<p>In the example workflow we have set up in the previous sections, all items in the output folder will be automatically overwritten every time we run the master script <code>facesoil_analysis.R</code>. One simple way to back up your previous results is to create a zipfile of the entire output directory, place it in the <code>archive</code> folder, and rename it so it has the date as part of the filename.</p>
<p>After a while, that directory may look like this:</p>
<p><img src="screenshots/archive.png" width="70%" /></p>
<p><strong>Contents of archive folder, example.</strong></p>
<p>If your <code>processData</code> folder is very large, this may not be the optimal solution. Perhaps the <code>processedData</code> can be in a separate output folder, for example.</p>
<div id="adding-a-date-stamp-to-output-files" class="section level3">
<h3><span class="header-section-number">7.5.1</span> Adding a Date stamp to output files</h3>
<p>Another option is to use a slightly different output filename every time, most usefully with the current Date as part of the filename. The following example shows how you can achieve this with the <code>today</code> from the <code>lubridate</code> package, and the <code>glue</code> package:</p>
<div class="sourceCode" id="cb763"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb763-1"><a href="projectman.html#cb763-1"></a><span class="co"># For the following to work, load lubridate</span></span>
<span id="cb763-2"><a href="projectman.html#cb763-2"></a><span class="co"># Recall that in your workflow, it is best to load all packages in one place.</span></span>
<span id="cb763-3"><a href="projectman.html#cb763-3"></a><span class="kw">library</span>(lubridate)</span>
<span id="cb763-4"><a href="projectman.html#cb763-4"></a><span class="kw">library</span>(glue)</span>
<span id="cb763-5"><a href="projectman.html#cb763-5"></a></span>
<span id="cb763-6"><a href="projectman.html#cb763-6"></a><span class="co"># Make a filename with the current Date:</span></span>
<span id="cb763-7"><a href="projectman.html#cb763-7"></a>fn &lt;-<span class="st"> </span><span class="kw">glue</span>(<span class="st">&quot;output/figures/FACE_soilfigure1_{today()}.pdf&quot;</span>)</span>
<span id="cb763-8"><a href="projectman.html#cb763-8"></a>fn</span></code></pre></div>
<pre><code>## output/figures/FACE_soilfigure1_2020-11-09.pdf</code></pre>
<div class="sourceCode" id="cb765"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb765-1"><a href="projectman.html#cb765-1"></a><span class="co"># Also add the current time, make sure to reformat as &#39;:&#39; is not allowed!</span></span>
<span id="cb765-2"><a href="projectman.html#cb765-2"></a>fn &lt;-<span class="st"> </span><span class="kw">glue</span>(<span class="st">&quot;output/figures/FACE_soilfigure1_{format(now(),&#39;%Y-%m-%d_%H-%M&#39;)}.pdf&quot;</span>)</span>
<span id="cb765-3"><a href="projectman.html#cb765-3"></a>fn</span></code></pre></div>
<pre><code>## output/figures/FACE_soilfigure1_2020-11-09_21-55.pdf</code></pre>
</div>
</div>
<div id="scriptstructure" class="section level2">
<h2><span class="header-section-number">7.6</span> A logical structure for your scripts</h2>
<div id="write-functions-not-long-scripts" class="section level3">
<h3><span class="header-section-number">7.6.1</span> Write functions, not long scripts</h3>
<p>If a script becomes too long, write more functions. Writing your own functions is the most important advise if you want to write and maintain robust, complex projects.</p>
<p>As pointed out in the Chapter on Project management (<a href="projectman.html#projectman">7</a>), save these functions separately, for example “R/functions.R”, and <code>source</code> them with:</p>
<div class="sourceCode" id="cb767"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb767-1"><a href="projectman.html#cb767-1"></a><span class="kw">source</span>(<span class="st">&quot;R/functions.R&quot;</span>)</span></code></pre></div>
<p>Unfortunately <code>source</code> is not vectorized, so to read all R scripts from a subdirectory you can simply do,</p>
<div class="sourceCode" id="cb768"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb768-1"><a href="projectman.html#cb768-1"></a><span class="cf">for</span>(fn <span class="cf">in</span> <span class="kw">dir</span>(<span class="st">&quot;R&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;[.]R$&quot;</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)){</span>
<span id="cb768-2"><a href="projectman.html#cb768-2"></a>  <span class="kw">source</span>(fn)</span>
<span id="cb768-3"><a href="projectman.html#cb768-3"></a>}</span></code></pre></div>

<div class="rmdtry">
Write the above snippet into a function, which takes the directory to search as an argument.
</div>

</div>
<div id="divide-your-script-into-functional-blocks" class="section level3">
<h3><span class="header-section-number">7.6.2</span> Divide your script into functional blocks</h3>
<p>Dividing your scripts into a few functional blocks can help readability and reliability.
With special formatting, you can even improve the <em>table of contents</em> (TOC) menu in Rstudio for a script. Run the example below, and then find the TOC button in Rstudio:</p>
<p><img src="screenshots/tablecontents_button.png" width="30%" /></p>
<p><strong>Access the (nearly) automatic TOC in Rstudio</strong></p>
<p>In the following example script, note that we load all packages at the beginning of the script, so that when something goes wrong at that stage, we know before executing any of the ‘real’ code.</p>
<p>Also note the use of <code>#-----</code>, this helps to make the TOC as mentioned above.</p>
<div class="sourceCode" id="cb769"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb769-1"><a href="projectman.html#cb769-1"></a><span class="co"># An example script</span></span>
<span id="cb769-2"><a href="projectman.html#cb769-2"></a><span class="co"># 2020, Author</span></span>
<span id="cb769-3"><a href="projectman.html#cb769-3"></a></span>
<span id="cb769-4"><a href="projectman.html#cb769-4"></a></span>
<span id="cb769-5"><a href="projectman.html#cb769-5"></a><span class="co">#----- Load packages -----</span></span>
<span id="cb769-6"><a href="projectman.html#cb769-6"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb769-7"><a href="projectman.html#cb769-7"></a><span class="kw">library</span>(rvest)</span>
<span id="cb769-8"><a href="projectman.html#cb769-8"></a><span class="kw">library</span>(stringr)</span>
<span id="cb769-9"><a href="projectman.html#cb769-9"></a><span class="kw">library</span>(glue)</span>
<span id="cb769-10"><a href="projectman.html#cb769-10"></a></span>
<span id="cb769-11"><a href="projectman.html#cb769-11"></a><span class="co">#----- Custom functions -----</span></span>
<span id="cb769-12"><a href="projectman.html#cb769-12"></a><span class="kw">source</span>(<span class="st">&quot;R/functions.R&quot;</span>)</span>
<span id="cb769-13"><a href="projectman.html#cb769-13"></a><span class="kw">source</span>(<span class="st">&quot;R/database_functions.R&quot;</span>)</span>
<span id="cb769-14"><a href="projectman.html#cb769-14"></a></span>
<span id="cb769-15"><a href="projectman.html#cb769-15"></a><span class="co">#----- Configuration -----</span></span>
<span id="cb769-16"><a href="projectman.html#cb769-16"></a></span>
<span id="cb769-17"><a href="projectman.html#cb769-17"></a><span class="co"># Load configuration (passwords etc., see next Section!)</span></span>
<span id="cb769-18"><a href="projectman.html#cb769-18"></a>.conf &lt;-<span class="st"> </span>yaml<span class="op">::</span><span class="kw">read_yaml</span>(<span class="dt">file =</span> <span class="st">&quot;config.yml&quot;</span>)</span>
<span id="cb769-19"><a href="projectman.html#cb769-19"></a></span>
<span id="cb769-20"><a href="projectman.html#cb769-20"></a><span class="co">#----- Database -----</span></span>
<span id="cb769-21"><a href="projectman.html#cb769-21"></a></span>
<span id="cb769-22"><a href="projectman.html#cb769-22"></a><span class="co"># Make database connection</span></span>
<span id="cb769-23"><a href="projectman.html#cb769-23"></a>db_con &lt;-<span class="st"> </span><span class="kw">make_database_connection_knmi</span>(.conf)</span>
<span id="cb769-24"><a href="projectman.html#cb769-24"></a></span>
<span id="cb769-25"><a href="projectman.html#cb769-25"></a><span class="co"># Download data</span></span>
<span id="cb769-26"><a href="projectman.html#cb769-26"></a>cloud_data &lt;-<span class="st"> </span><span class="kw">download_cloud_data</span>(<span class="dt">con =</span> db_con)</span>
<span id="cb769-27"><a href="projectman.html#cb769-27"></a></span>
<span id="cb769-28"><a href="projectman.html#cb769-28"></a><span class="co"># Archive the data</span></span>
<span id="cb769-29"><a href="projectman.html#cb769-29"></a>fn &lt;-<span class="st"> </span><span class="kw">glue</span>(<span class="st">&quot;archive/out_{Sys.Date()}.rds&quot;</span>)</span>
<span id="cb769-30"><a href="projectman.html#cb769-30"></a><span class="kw">try</span>(<span class="kw">saveRDS</span>(cloud_data, fn), <span class="dt">silent =</span> <span class="ot">TRUE</span>)</span>
<span id="cb769-31"><a href="projectman.html#cb769-31"></a></span>
<span id="cb769-32"><a href="projectman.html#cb769-32"></a><span class="co">#----- Visualization -----</span></span>
<span id="cb769-33"><a href="projectman.html#cb769-33"></a></span>
<span id="cb769-34"><a href="projectman.html#cb769-34"></a><span class="co"># Make visuals</span></span>
<span id="cb769-35"><a href="projectman.html#cb769-35"></a><span class="kw">make_cloud_maps</span>(<span class="dt">data =</span> cloud_data)</span>
<span id="cb769-36"><a href="projectman.html#cb769-36"></a></span>
<span id="cb769-37"><a href="projectman.html#cb769-37"></a><span class="co">#----- Model -----</span></span>
<span id="cb769-38"><a href="projectman.html#cb769-38"></a></span>
<span id="cb769-39"><a href="projectman.html#cb769-39"></a><span class="co"># Do some advanced modelling</span></span>
<span id="cb769-40"><a href="projectman.html#cb769-40"></a>model_run &lt;-<span class="st"> </span><span class="kw">run_cloudy_model</span>(<span class="dt">data =</span> cloud_data)</span>
<span id="cb769-41"><a href="projectman.html#cb769-41"></a></span>
<span id="cb769-42"><a href="projectman.html#cb769-42"></a><span class="co"># Upload the model results to a remote database</span></span>
<span id="cb769-43"><a href="projectman.html#cb769-43"></a><span class="kw">upload_model_db16</span>(model_run, <span class="dt">config =</span> .conf)</span></code></pre></div>
<p>The <em>fictional</em> script above is just an example how you can divide a <em>master script</em> into logical statements, using functions that perform all the underlying tasks.</p>
<p>One major advantage of the above approach is because functions execute their “inner workings” in a <strong>separate environment</strong>, which means that objects inside a function are not visible either outside the function (like the main script) or in any other script.</p>
<p>That way, executing the script above does not produce any objects in the environment (the memory) other than the ones <em>returned</em> by the functions. All the intermediate objects that were executed inside each function have disappeared, freeing memory and avoiding conflicts.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="versioncontrol.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="masteringpackages.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["twitter", "linkedin"],
"google": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["prcr.pdf"],
"toc": {
"collapse": "subsection"
},
"favicon": "favicon.ico",
"githubrepo": "RemkoDuursma/prcr",
"description": "A Learning Guide to R: : data, analytical, and programming skills"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
