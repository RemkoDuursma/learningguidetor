<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 8 Various topics | A Learning Guide to R: data, analytical, and programming skills.</title>
  <meta name="description" content="This book teaches introductory to intermediate skills in R." />
  <meta name="generator" content="bookdown 0.17 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 8 Various topics | A Learning Guide to R: data, analytical, and programming skills." />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book teaches introductory to intermediate skills in R." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 8 Various topics | A Learning Guide to R: data, analytical, and programming skills." />
  
  <meta name="twitter:description" content="This book teaches introductory to intermediate skills in R." />
  

<meta name="author" content="Remko Duursma" />


<meta name="date" content="2020-03-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="projectman.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="css\style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Learning Guide to R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>A Learning Guide to R</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#aboutauthor"><i class="fa fa-check"></i>About the author</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Beginner skills</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#installingr"><i class="fa fa-check"></i><b>1.1</b> Installing R and Rstudio</a><ul>
<li class="chapter" data-level="1.1.1" data-path="intro.html"><a href="intro.html#exampledata"><i class="fa fa-check"></i><b>1.1.1</b> Example data used throughout this book</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#basicops"><i class="fa fa-check"></i><b>1.2</b> Basic operations</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#vectorintro"><i class="fa fa-check"></i><b>1.3</b> Working with vectors</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#writing-code-in-a-script"><i class="fa fa-check"></i><b>1.4</b> Writing code in a script</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#vectorized"><i class="fa fa-check"></i><b>1.5</b> Vectorized operations</a><ul>
<li class="chapter" data-level="1.5.1" data-path="intro.html"><a href="intro.html#multifunctions"><i class="fa fa-check"></i><b>1.5.1</b> Applying multiple functions at once</a></li>
</ul></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#matrices"><i class="fa fa-check"></i><b>1.6</b> Working with matrices</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#objects-in-the-workspace"><i class="fa fa-check"></i><b>1.7</b> Objects in the workspace</a></li>
<li class="chapter" data-level="1.8" data-path="intro.html"><a href="intro.html#fileswd"><i class="fa fa-check"></i><b>1.8</b> Files in the working directory</a></li>
<li class="chapter" data-level="1.9" data-path="intro.html"><a href="intro.html#rstudio-projects"><i class="fa fa-check"></i><b>1.9</b> Rstudio projects</a></li>
<li class="chapter" data-level="1.10" data-path="intro.html"><a href="intro.html#packages"><i class="fa fa-check"></i><b>1.10</b> Packages</a><ul>
<li class="chapter" data-level="1.10.1" data-path="intro.html"><a href="intro.html#installpackage"><i class="fa fa-check"></i><b>1.10.1</b> Install packages from CRAN</a></li>
<li class="chapter" data-level="1.10.2" data-path="intro.html"><a href="intro.html#loadpackage"><i class="fa fa-check"></i><b>1.10.2</b> Loading packages</a></li>
<li class="chapter" data-level="1.10.3" data-path="intro.html"><a href="intro.html#setting-the-cran-mirror"><i class="fa fa-check"></i><b>1.10.3</b> Setting the CRAN mirror</a></li>
<li class="chapter" data-level="1.10.4" data-path="intro.html"><a href="intro.html#install-from-git-hosting-sites"><i class="fa fa-check"></i><b>1.10.4</b> Install from git hosting sites</a></li>
<li class="chapter" data-level="1.10.5" data-path="intro.html"><a href="intro.html#updating-r-and-package-locations"><i class="fa fa-check"></i><b>1.10.5</b> Updating R and package locations</a></li>
<li class="chapter" data-level="1.10.6" data-path="intro.html"><a href="intro.html#updatingpackages"><i class="fa fa-check"></i><b>1.10.6</b> Updating packages</a></li>
<li class="chapter" data-level="1.10.7" data-path="intro.html"><a href="intro.html#install-missing-packages"><i class="fa fa-check"></i><b>1.10.7</b> Install missing packages</a></li>
<li class="chapter" data-level="1.10.8" data-path="intro.html"><a href="intro.html#conflicts"><i class="fa fa-check"></i><b>1.10.8</b> Conflicts</a></li>
<li class="chapter" data-level="1.10.9" data-path="intro.html"><a href="intro.html#loading-many-packages"><i class="fa fa-check"></i><b>1.10.9</b> Loading many packages</a></li>
</ul></li>
<li class="chapter" data-level="1.11" data-path="intro.html"><a href="intro.html#helpfiles"><i class="fa fa-check"></i><b>1.11</b> Accessing the help files</a></li>
<li class="chapter" data-level="1.12" data-path="intro.html"><a href="intro.html#writing-lots-of-code-rmarkdown-or-scripts"><i class="fa fa-check"></i><b>1.12</b> Writing lots of code: rmarkdown or scripts?</a><ul>
<li class="chapter" data-level="1.12.1" data-path="intro.html"><a href="intro.html#reproducible-documents-with-rmarkdown"><i class="fa fa-check"></i><b>1.12.1</b> Reproducible documents with rmarkdown</a></li>
<li class="chapter" data-level="1.12.2" data-path="intro.html"><a href="intro.html#scripts"><i class="fa fa-check"></i><b>1.12.2</b> Using R scripts</a></li>
</ul></li>
<li class="chapter" data-level="1.13" data-path="intro.html"><a href="intro.html#exercises"><i class="fa fa-check"></i><b>1.13</b> Exercises</a><ul>
<li class="chapter" data-level="1.13.1" data-path="intro.html"><a href="intro.html#calculating"><i class="fa fa-check"></i><b>1.13.1</b> Calculating</a></li>
<li class="chapter" data-level="1.13.2" data-path="intro.html"><a href="intro.html#simple-objects"><i class="fa fa-check"></i><b>1.13.2</b> Simple objects</a></li>
<li class="chapter" data-level="1.13.3" data-path="intro.html"><a href="intro.html#vecexerc1"><i class="fa fa-check"></i><b>1.13.3</b> Working with a single vector</a></li>
<li class="chapter" data-level="1.13.4" data-path="intro.html"><a href="intro.html#scriptexercise"><i class="fa fa-check"></i><b>1.13.4</b> Scripts</a></li>
<li class="chapter" data-level="1.13.5" data-path="intro.html"><a href="intro.html#exquote"><i class="fa fa-check"></i><b>1.13.5</b> To quote or not to quote</a></li>
<li class="chapter" data-level="1.13.6" data-path="intro.html"><a href="intro.html#working-with-two-vectors"><i class="fa fa-check"></i><b>1.13.6</b> Working with two vectors</a></li>
<li class="chapter" data-level="1.13.7" data-path="intro.html"><a href="intro.html#alphabet-aerobics-1"><i class="fa fa-check"></i><b>1.13.7</b> Alphabet aerobics 1</a></li>
<li class="chapter" data-level="1.13.8" data-path="intro.html"><a href="intro.html#comparing-and-combining-vectors"><i class="fa fa-check"></i><b>1.13.8</b> Comparing and combining vectors</a></li>
<li class="chapter" data-level="1.13.9" data-path="intro.html"><a href="intro.html#into-the-matrix"><i class="fa fa-check"></i><b>1.13.9</b> Into the matrix</a></li>
<li class="chapter" data-level="1.13.10" data-path="intro.html"><a href="intro.html#packages-1"><i class="fa fa-check"></i><b>1.13.10</b> Packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="dataskills1.html"><a href="dataskills1.html"><i class="fa fa-check"></i><b>2</b> Data skills - Part 1</a><ul>
<li class="chapter" data-level="2.1" data-path="dataskills1.html"><a href="dataskills1.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="dataskills1.html"><a href="dataskills1.html#generating-data"><i class="fa fa-check"></i><b>2.2</b> Generating data</a><ul>
<li class="chapter" data-level="2.2.1" data-path="dataskills1.html"><a href="dataskills1.html#sequences"><i class="fa fa-check"></i><b>2.2.1</b> Sequences of numbers</a></li>
<li class="chapter" data-level="2.2.2" data-path="dataskills1.html"><a href="dataskills1.html#randomnumbers"><i class="fa fa-check"></i><b>2.2.2</b> Random numbers</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="dataskills1.html"><a href="dataskills1.html#readingdata"><i class="fa fa-check"></i><b>2.3</b> Reading data</a><ul>
<li class="chapter" data-level="2.3.1" data-path="dataskills1.html"><a href="dataskills1.html#readcsv"><i class="fa fa-check"></i><b>2.3.1</b> Reading CSV files</a></li>
<li class="chapter" data-level="2.3.2" data-path="dataskills1.html"><a href="dataskills1.html#reading-large-csv-files"><i class="fa fa-check"></i><b>2.3.2</b> Reading large CSV files</a></li>
<li class="chapter" data-level="2.3.3" data-path="dataskills1.html"><a href="dataskills1.html#tabdelimtext"><i class="fa fa-check"></i><b>2.3.3</b> Reading Tab-delimited text files</a></li>
<li class="chapter" data-level="2.3.4" data-path="dataskills1.html"><a href="dataskills1.html#datainscript"><i class="fa fa-check"></i><b>2.3.4</b> Including data in a script</a></li>
<li class="chapter" data-level="2.3.5" data-path="dataskills1.html"><a href="dataskills1.html#json"><i class="fa fa-check"></i><b>2.3.5</b> JSON</a></li>
<li class="chapter" data-level="2.3.6" data-path="dataskills1.html"><a href="dataskills1.html#nosql-databases"><i class="fa fa-check"></i><b>2.3.6</b> (No)SQL databases</a></li>
<li class="chapter" data-level="2.3.7" data-path="dataskills1.html"><a href="dataskills1.html#excel-spreadsheets"><i class="fa fa-check"></i><b>2.3.7</b> Excel spreadsheets</a></li>
<li class="chapter" data-level="2.3.8" data-path="dataskills1.html"><a href="dataskills1.html#proprietary-formats"><i class="fa fa-check"></i><b>2.3.8</b> Proprietary formats</a></li>
<li class="chapter" data-level="2.3.9" data-path="dataskills1.html"><a href="dataskills1.html#web-services"><i class="fa fa-check"></i><b>2.3.9</b> Web services</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="dataskills1.html"><a href="dataskills1.html#dataframes"><i class="fa fa-check"></i><b>2.4</b> Working with dataframes</a><ul>
<li class="chapter" data-level="2.4.1" data-path="dataskills1.html"><a href="dataskills1.html#vecstodfr"><i class="fa fa-check"></i><b>2.4.1</b> Convert vectors into a dataframe</a></li>
<li class="chapter" data-level="2.4.2" data-path="dataskills1.html"><a href="dataskills1.html#vecdataframes"><i class="fa fa-check"></i><b>2.4.2</b> Variables in the dataframe</a></li>
<li class="chapter" data-level="2.4.3" data-path="dataskills1.html"><a href="dataskills1.html#namesdataframe"><i class="fa fa-check"></i><b>2.4.3</b> Changing column names in dataframes</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="dataskills1.html"><a href="dataskills1.html#extracting-data"><i class="fa fa-check"></i><b>2.5</b> Extracting data</a><ul>
<li class="chapter" data-level="2.5.1" data-path="dataskills1.html"><a href="dataskills1.html#vectorindexing"><i class="fa fa-check"></i><b>2.5.1</b> Vectors</a></li>
<li class="chapter" data-level="2.5.2" data-path="dataskills1.html"><a href="dataskills1.html#subsetdataframes"><i class="fa fa-check"></i><b>2.5.2</b> Dataframes</a></li>
<li class="chapter" data-level="2.5.3" data-path="dataskills1.html"><a href="dataskills1.html#a-faster-method"><i class="fa fa-check"></i><b>2.5.3</b> A faster method</a></li>
<li class="chapter" data-level="2.5.4" data-path="dataskills1.html"><a href="dataskills1.html#deleting-columns"><i class="fa fa-check"></i><b>2.5.4</b> Deleting columns</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="dataskills1.html"><a href="dataskills1.html#exportingdata"><i class="fa fa-check"></i><b>2.6</b> Exporting data</a></li>
<li class="chapter" data-level="2.7" data-path="dataskills1.html"><a href="dataskills1.html#special-data-types"><i class="fa fa-check"></i><b>2.7</b> Special data types</a><ul>
<li class="chapter" data-level="2.7.1" data-path="dataskills1.html"><a href="dataskills1.html#workingfactors"><i class="fa fa-check"></i><b>2.7.1</b> Working with factors</a></li>
<li class="chapter" data-level="2.7.2" data-path="dataskills1.html"><a href="dataskills1.html#workinglogic"><i class="fa fa-check"></i><b>2.7.2</b> Working with logical data</a></li>
<li class="chapter" data-level="2.7.3" data-path="dataskills1.html"><a href="dataskills1.html#workingmissing"><i class="fa fa-check"></i><b>2.7.3</b> Working with missing values</a></li>
<li class="chapter" data-level="2.7.4" data-path="dataskills1.html"><a href="dataskills1.html#workingtext"><i class="fa fa-check"></i><b>2.7.4</b> Working with text</a></li>
<li class="chapter" data-level="2.7.5" data-path="dataskills1.html"><a href="dataskills1.html#workingwithdates"><i class="fa fa-check"></i><b>2.7.5</b> Working with dates and times</a></li>
<li class="chapter" data-level="2.7.6" data-path="dataskills1.html"><a href="dataskills1.html#converttype"><i class="fa fa-check"></i><b>2.7.6</b> Converting between data types</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="dataskills1.html"><a href="dataskills1.html#exercises-1"><i class="fa fa-check"></i><b>2.8</b> Exercises</a><ul>
<li class="chapter" data-level="2.8.1" data-path="dataskills1.html"><a href="dataskills1.html#working-with-a-single-vector---indexing"><i class="fa fa-check"></i><b>2.8.1</b> Working with a single vector - indexing</a></li>
<li class="chapter" data-level="2.8.2" data-path="dataskills1.html"><a href="dataskills1.html#alphabet-aerobics-2"><i class="fa fa-check"></i><b>2.8.2</b> Alphabet aerobics 2</a></li>
<li class="chapter" data-level="2.8.3" data-path="dataskills1.html"><a href="dataskills1.html#basic-operations-with-the-cereals-data"><i class="fa fa-check"></i><b>2.8.3</b> Basic operations with the Cereals data</a></li>
<li class="chapter" data-level="2.8.4" data-path="dataskills1.html"><a href="dataskills1.html#a-short-dataset"><i class="fa fa-check"></i><b>2.8.4</b> A short dataset</a></li>
<li class="chapter" data-level="2.8.5" data-path="dataskills1.html"><a href="dataskills1.html#titanic---part-1"><i class="fa fa-check"></i><b>2.8.5</b> Titanic - Part 1</a></li>
<li class="chapter" data-level="2.8.6" data-path="dataskills1.html"><a href="dataskills1.html#titanic---part-2"><i class="fa fa-check"></i><b>2.8.6</b> Titanic - Part 2</a></li>
<li class="chapter" data-level="2.8.7" data-path="dataskills1.html"><a href="dataskills1.html#hydro-dam"><i class="fa fa-check"></i><b>2.8.7</b> Hydro dam</a></li>
<li class="chapter" data-level="2.8.8" data-path="dataskills1.html"><a href="dataskills1.html#hfe-tree-measurements"><i class="fa fa-check"></i><b>2.8.8</b> HFE tree measurements</a></li>
<li class="chapter" data-level="2.8.9" data-path="dataskills1.html"><a href="dataskills1.html#flux-data"><i class="fa fa-check"></i><b>2.8.9</b> Flux data</a></li>
<li class="chapter" data-level="2.8.10" data-path="dataskills1.html"><a href="dataskills1.html#dna-aerobics"><i class="fa fa-check"></i><b>2.8.10</b> DNA Aerobics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataskills2.html"><a href="dataskills2.html"><i class="fa fa-check"></i><b>3</b> Data skills - Part 2</a><ul>
<li class="chapter" data-level="3.1" data-path="dataskills2.html"><a href="dataskills2.html#summarizing-dataframes"><i class="fa fa-check"></i><b>3.1</b> Summarizing dataframes</a><ul>
<li class="chapter" data-level="3.1.1" data-path="dataskills2.html"><a href="dataskills2.html#tapplyaggregate"><i class="fa fa-check"></i><b>3.1.1</b> Making summary tables</a></li>
<li class="chapter" data-level="3.1.2" data-path="dataskills2.html"><a href="dataskills2.html#xtabs"><i class="fa fa-check"></i><b>3.1.2</b> Tables of counts</a></li>
<li class="chapter" data-level="3.1.3" data-path="dataskills2.html"><a href="dataskills2.html#summaryvars"><i class="fa fa-check"></i><b>3.1.3</b> Adding summary variables to dataframes</a></li>
<li class="chapter" data-level="3.1.4" data-path="dataskills2.html"><a href="dataskills2.html#reorder"><i class="fa fa-check"></i><b>3.1.4</b> Reordering factor levels based on a summary variable</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="dataskills2.html"><a href="dataskills2.html#combining-dataframes"><i class="fa fa-check"></i><b>3.2</b> Combining dataframes</a><ul>
<li class="chapter" data-level="3.2.1" data-path="dataskills2.html"><a href="dataskills2.html#merge"><i class="fa fa-check"></i><b>3.2.1</b> Merging dataframes</a></li>
<li class="chapter" data-level="3.2.2" data-path="dataskills2.html"><a href="dataskills2.html#dplyrjoin"><i class="fa fa-check"></i><b>3.2.2</b> Using join from <code>dplyr</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="dataskills2.html"><a href="dataskills2.html#rbind"><i class="fa fa-check"></i><b>3.2.3</b> Row-binding dataframes</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="dataskills2.html"><a href="dataskills2.html#reshaping"><i class="fa fa-check"></i><b>3.3</b> Reshaping data</a><ul>
<li class="chapter" data-level="3.3.1" data-path="dataskills2.html"><a href="dataskills2.html#from-wide-to-long"><i class="fa fa-check"></i><b>3.3.1</b> From wide to long</a></li>
<li class="chapter" data-level="3.3.2" data-path="dataskills2.html"><a href="dataskills2.html#from-long-to-wide"><i class="fa fa-check"></i><b>3.3.2</b> From long to wide</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="dataskills2.html"><a href="dataskills2.html#more-complex-dplyr-examples"><i class="fa fa-check"></i><b>3.4</b> More complex <code>dplyr</code> examples</a><ul>
<li class="chapter" data-level="3.4.1" data-path="dataskills2.html"><a href="dataskills2.html#tree-growth-data-filter-and-multiple-groupings"><i class="fa fa-check"></i><b>3.4.1</b> Tree growth data: filter and multiple groupings</a></li>
<li class="chapter" data-level="3.4.2" data-path="dataskills2.html"><a href="dataskills2.html#crude-oil-production-find-top-exporters"><i class="fa fa-check"></i><b>3.4.2</b> Crude oil production: find top exporters</a></li>
<li class="chapter" data-level="3.4.3" data-path="dataskills2.html"><a href="dataskills2.html#weightlossdplyr"><i class="fa fa-check"></i><b>3.4.3</b> Weight loss data: make an irregular timeseries regular</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="dataskills2.html"><a href="dataskills2.html#exercises-2"><i class="fa fa-check"></i><b>3.5</b> Exercises</a><ul>
<li class="chapter" data-level="3.5.1" data-path="dataskills2.html"><a href="dataskills2.html#summarizing-the-cereal-data"><i class="fa fa-check"></i><b>3.5.1</b> Summarizing the cereal data</a></li>
<li class="chapter" data-level="3.5.2" data-path="dataskills2.html"><a href="dataskills2.html#words-and-the-weather"><i class="fa fa-check"></i><b>3.5.2</b> Words and the weather</a></li>
<li class="chapter" data-level="3.5.3" data-path="dataskills2.html"><a href="dataskills2.html#merging-data"><i class="fa fa-check"></i><b>3.5.3</b> Merging data</a></li>
<li class="chapter" data-level="3.5.4" data-path="dataskills2.html"><a href="dataskills2.html#merging-multiple-datasets"><i class="fa fa-check"></i><b>3.5.4</b> Merging multiple datasets</a></li>
<li class="chapter" data-level="3.5.5" data-path="dataskills2.html"><a href="dataskills2.html#ordered-boxplot"><i class="fa fa-check"></i><b>3.5.5</b> Ordered boxplot</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>4</b> Functions, lists and loops</a><ul>
<li class="chapter" data-level="4.1" data-path="programming.html"><a href="programming.html#introduction-1"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="programming.html"><a href="programming.html#writefunctions"><i class="fa fa-check"></i><b>4.2</b> Writing functions</a><ul>
<li class="chapter" data-level="4.2.1" data-path="programming.html"><a href="programming.html#returning-results"><i class="fa fa-check"></i><b>4.2.1</b> Returning results</a></li>
<li class="chapter" data-level="4.2.2" data-path="programming.html"><a href="programming.html#functions-without-arguments"><i class="fa fa-check"></i><b>4.2.2</b> Functions without arguments</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="programming.html"><a href="programming.html#workinglists"><i class="fa fa-check"></i><b>4.3</b> Working with lists</a><ul>
<li class="chapter" data-level="4.3.1" data-path="programming.html"><a href="programming.html#indexing-lists"><i class="fa fa-check"></i><b>4.3.1</b> Indexing lists</a></li>
<li class="chapter" data-level="4.3.2" data-path="programming.html"><a href="programming.html#converting-lists-to-dataframes-or-vectors"><i class="fa fa-check"></i><b>4.3.2</b> Converting lists to dataframes or vectors</a></li>
<li class="chapter" data-level="4.3.3" data-path="programming.html"><a href="programming.html#combining-lists"><i class="fa fa-check"></i><b>4.3.3</b> Combining lists</a></li>
<li class="chapter" data-level="4.3.4" data-path="programming.html"><a href="programming.html#extracting-output-from-built-in-functions"><i class="fa fa-check"></i><b>4.3.4</b> Extracting output from built-in functions</a></li>
<li class="chapter" data-level="4.3.5" data-path="programming.html"><a href="programming.html#dfrlists"><i class="fa fa-check"></i><b>4.3.5</b> Creating lists from dataframes</a></li>
<li class="chapter" data-level="4.3.6" data-path="programming.html"><a href="programming.html#lapply"><i class="fa fa-check"></i><b>4.3.6</b> Applying functions to lists</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="programming.html"><a href="programming.html#simpleloops"><i class="fa fa-check"></i><b>4.4</b> Loops</a><ul>
<li class="chapter" data-level="4.4.1" data-path="programming.html"><a href="programming.html#better-indexing"><i class="fa fa-check"></i><b>4.4.1</b> Better indexing</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="programming.html"><a href="programming.html#functionsadvanced"><i class="fa fa-check"></i><b>4.5</b> Advanced concepts</a><ul>
<li class="chapter" data-level="4.5.1" data-path="programming.html"><a href="programming.html#wrapfunctions"><i class="fa fa-check"></i><b>4.5.1</b> Wrapper functions</a></li>
<li class="chapter" data-level="4.5.2" data-path="programming.html"><a href="programming.html#wrapper-functions-to-ggplot2-or-dplyr"><i class="fa fa-check"></i><b>4.5.2</b> Wrapper functions to <code>ggplot2</code> or <code>dplyr</code></a></li>
<li class="chapter" data-level="4.5.3" data-path="programming.html"><a href="programming.html#functions-that-take-vectors-as-input"><i class="fa fa-check"></i><b>4.5.3</b> Functions that take vectors as input</a></li>
<li class="chapter" data-level="4.5.4" data-path="programming.html"><a href="programming.html#if-then-else-switch"><i class="fa fa-check"></i><b>4.5.4</b> If, then, else … switch</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="programming.html"><a href="programming.html#robust-functions-defensive-programming"><i class="fa fa-check"></i><b>4.6</b> Robust functions: defensive programming</a><ul>
<li class="chapter" data-level="4.6.1" data-path="programming.html"><a href="programming.html#argument-matching"><i class="fa fa-check"></i><b>4.6.1</b> Argument matching</a></li>
<li class="chapter" data-level="4.6.2" data-path="programming.html"><a href="programming.html#argument-checking"><i class="fa fa-check"></i><b>4.6.2</b> Argument checking</a></li>
<li class="chapter" data-level="4.6.3" data-path="programming.html"><a href="programming.html#sending-warnings-errors-messages"><i class="fa fa-check"></i><b>4.6.3</b> Sending warnings, errors, messages</a></li>
<li class="chapter" data-level="4.6.4" data-path="programming.html"><a href="programming.html#executing-code-when-the-function-ends-or-fails"><i class="fa fa-check"></i><b>4.6.4</b> Executing code when the function ends (or fails)</a></li>
<li class="chapter" data-level="4.6.5" data-path="programming.html"><a href="programming.html#catch-errors-with-try"><i class="fa fa-check"></i><b>4.6.5</b> Catch errors with <code>try</code></a></li>
<li class="chapter" data-level="4.6.6" data-path="programming.html"><a href="programming.html#writing-database-wrapper-functions"><i class="fa fa-check"></i><b>4.6.6</b> Writing database wrapper functions</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="programming.html"><a href="programming.html#exercises-3"><i class="fa fa-check"></i><b>4.7</b> Exercises</a><ul>
<li class="chapter" data-level="4.7.1" data-path="programming.html"><a href="programming.html#writing-functions"><i class="fa fa-check"></i><b>4.7.1</b> Writing functions</a></li>
<li class="chapter" data-level="4.7.2" data-path="programming.html"><a href="programming.html#working-with-lists"><i class="fa fa-check"></i><b>4.7.2</b> Working with lists</a></li>
<li class="chapter" data-level="4.7.3" data-path="programming.html"><a href="programming.html#functions-for-histograms"><i class="fa fa-check"></i><b>4.7.3</b> Functions for histograms</a></li>
<li class="chapter" data-level="4.7.4" data-path="programming.html"><a href="programming.html#using-functions-to-make-many-plots"><i class="fa fa-check"></i><b>4.7.4</b> Using functions to make many plots</a></li>
<li class="chapter" data-level="4.7.5" data-path="programming.html"><a href="programming.html#monthly-weather-plots"><i class="fa fa-check"></i><b>4.7.5</b> Monthly weather plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="webservices.html"><a href="webservices.html"><i class="fa fa-check"></i><b>5</b> R on the web</a><ul>
<li class="chapter" data-level="5.1" data-path="webservices.html"><a href="webservices.html#introduction-2"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="webservices.html"><a href="webservices.html#reading-data-from-remote-databases"><i class="fa fa-check"></i><b>5.2</b> Reading data from remote databases</a><ul>
<li class="chapter" data-level="5.2.1" data-path="webservices.html"><a href="webservices.html#nosql"><i class="fa fa-check"></i><b>5.2.1</b> NoSQL</a></li>
<li class="chapter" data-level="5.2.2" data-path="webservices.html"><a href="webservices.html#sql"><i class="fa fa-check"></i><b>5.2.2</b> SQL</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="webservices.html"><a href="webservices.html#accessing-an-api"><i class="fa fa-check"></i><b>5.3</b> Accessing an API</a></li>
<li class="chapter" data-level="5.4" data-path="webservices.html"><a href="webservices.html#deploying-an-api-with-plumber"><i class="fa fa-check"></i><b>5.4</b> Deploying an API with <code>plumber</code></a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="versioncontrol.html"><a href="versioncontrol.html"><i class="fa fa-check"></i><b>6</b> Version control with git</a><ul>
<li class="chapter" data-level="6.1" data-path="versioncontrol.html"><a href="versioncontrol.html#shouldigit"><i class="fa fa-check"></i><b>6.1</b> Should I learn version control?</a></li>
<li class="chapter" data-level="6.2" data-path="versioncontrol.html"><a href="versioncontrol.html#basics-of-git"><i class="fa fa-check"></i><b>6.2</b> Basics of git</a><ul>
<li class="chapter" data-level="6.2.1" data-path="versioncontrol.html"><a href="versioncontrol.html#basic-principles"><i class="fa fa-check"></i><b>6.2.1</b> Basic principles</a></li>
<li class="chapter" data-level="6.2.2" data-path="versioncontrol.html"><a href="versioncontrol.html#installing-git"><i class="fa fa-check"></i><b>6.2.2</b> Installing git</a></li>
<li class="chapter" data-level="6.2.3" data-path="versioncontrol.html"><a href="versioncontrol.html#using-git-in-rstudio"><i class="fa fa-check"></i><b>6.2.3</b> Using git in Rstudio</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="versioncontrol.html"><a href="versioncontrol.html#localgit"><i class="fa fa-check"></i><b>6.3</b> Local git repositories</a><ul>
<li class="chapter" data-level="6.3.1" data-path="versioncontrol.html"><a href="versioncontrol.html#firstgitsession"><i class="fa fa-check"></i><b>6.3.1</b> A first session with version control in Rstudio</a></li>
<li class="chapter" data-level="6.3.2" data-path="versioncontrol.html"><a href="versioncontrol.html#deleting-files-and-sensitive-information"><i class="fa fa-check"></i><b>6.3.2</b> Deleting files and sensitive information</a></li>
<li class="chapter" data-level="6.3.3" data-path="versioncontrol.html"><a href="versioncontrol.html#a-few-hints"><i class="fa fa-check"></i><b>6.3.3</b> A few hints</a></li>
<li class="chapter" data-level="6.3.4" data-path="versioncontrol.html"><a href="versioncontrol.html#reverting-changes"><i class="fa fa-check"></i><b>6.3.4</b> Reverting changes</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="versioncontrol.html"><a href="versioncontrol.html#remotegit"><i class="fa fa-check"></i><b>6.4</b> Remote git repositories</a><ul>
<li class="chapter" data-level="6.4.1" data-path="versioncontrol.html"><a href="versioncontrol.html#makeremotegit"><i class="fa fa-check"></i><b>6.4.1</b> Making a remote repository</a></li>
<li class="chapter" data-level="6.4.2" data-path="versioncontrol.html"><a href="versioncontrol.html#gitremoteworkflow"><i class="fa fa-check"></i><b>6.4.2</b> Workflow</a></li>
<li class="chapter" data-level="6.4.3" data-path="versioncontrol.html"><a href="versioncontrol.html#a-session-with-a-remote-repository"><i class="fa fa-check"></i><b>6.4.3</b> A session with a remote repository</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="versioncontrol.html"><a href="versioncontrol.html#ignoring-files"><i class="fa fa-check"></i><b>6.5</b> Ignoring files</a></li>
<li class="chapter" data-level="6.6" data-path="versioncontrol.html"><a href="versioncontrol.html#commandline"><i class="fa fa-check"></i><b>6.6</b> Using the command line</a><ul>
<li class="chapter" data-level="6.6.1" data-path="versioncontrol.html"><a href="versioncontrol.html#basic-commands"><i class="fa fa-check"></i><b>6.6.1</b> Basic commands</a></li>
<li class="chapter" data-level="6.6.2" data-path="versioncontrol.html"><a href="versioncontrol.html#useful-tasks"><i class="fa fa-check"></i><b>6.6.2</b> Useful tasks</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="projectman.html"><a href="projectman.html"><i class="fa fa-check"></i><b>7</b> Project management and workflow</a><ul>
<li class="chapter" data-level="7.1" data-path="projectman.html"><a href="projectman.html#tips-on-organizing-your-code"><i class="fa fa-check"></i><b>7.1</b> Tips on organizing your code</a></li>
<li class="chapter" data-level="7.2" data-path="projectman.html"><a href="projectman.html#set-up-a-project-in-rstudio-1"><i class="fa fa-check"></i><b>7.2</b> Set up a project in Rstudio</a></li>
<li class="chapter" data-level="7.3" data-path="projectman.html"><a href="projectman.html#directory-structure"><i class="fa fa-check"></i><b>7.3</b> Directory structure</a><ul>
<li class="chapter" data-level="7.3.1" data-path="projectman.html"><a href="projectman.html#rawdata"><i class="fa fa-check"></i><b>7.3.1</b> <code>rawdata</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="projectman.html"><a href="projectman.html#rfunctions"><i class="fa fa-check"></i><b>7.3.2</b> <code>Rfunctions</code></a></li>
<li class="chapter" data-level="7.3.3" data-path="projectman.html"><a href="projectman.html#output"><i class="fa fa-check"></i><b>7.3.3</b> <code>output</code></a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="projectman.html"><a href="projectman.html#the-r-scripts"><i class="fa fa-check"></i><b>7.4</b> The R scripts</a><ul>
<li class="chapter" data-level="7.4.1" data-path="projectman.html"><a href="projectman.html#facesoil_analysis.r"><i class="fa fa-check"></i><b>7.4.1</b> <code>facesoil_analysis.R</code></a></li>
<li class="chapter" data-level="7.4.2" data-path="projectman.html"><a href="projectman.html#facesoil_figures.r"><i class="fa fa-check"></i><b>7.4.2</b> <code>facesoil_figures.R</code></a></li>
<li class="chapter" data-level="7.4.3" data-path="projectman.html"><a href="projectman.html#facesoil_load"><i class="fa fa-check"></i><b>7.4.3</b> <code>facesoil_load</code></a></li>
<li class="chapter" data-level="7.4.4" data-path="projectman.html"><a href="projectman.html#facesoil_readdata.r"><i class="fa fa-check"></i><b>7.4.4</b> <code>facesoil_readdata.R</code></a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="projectman.html"><a href="projectman.html#archiving-the-output"><i class="fa fa-check"></i><b>7.5</b> Archiving the output</a><ul>
<li class="chapter" data-level="7.5.1" data-path="projectman.html"><a href="projectman.html#adding-a-date-stamp-to-output-files"><i class="fa fa-check"></i><b>7.5.1</b> Adding a Date stamp to output files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="programmingtips.html"><a href="programmingtips.html"><i class="fa fa-check"></i><b>8</b> Various topics</a><ul>
<li class="chapter" data-level="8.1" data-path="programmingtips.html"><a href="programmingtips.html#mastering-package-dependencies"><i class="fa fa-check"></i><b>8.1</b> Mastering package dependencies</a><ul>
<li class="chapter" data-level="8.1.1" data-path="programmingtips.html"><a href="programmingtips.html#what-version"><i class="fa fa-check"></i><b>8.1.1</b> What version?</a></li>
<li class="chapter" data-level="8.1.2" data-path="programmingtips.html"><a href="programmingtips.html#avoiding-conflicts"><i class="fa fa-check"></i><b>8.1.2</b> Avoiding conflicts</a></li>
<li class="chapter" data-level="8.1.3" data-path="programmingtips.html"><a href="programmingtips.html#the-search-path-and-conflicts"><i class="fa fa-check"></i><b>8.1.3</b> The search path and conflicts</a></li>
<li class="chapter" data-level="8.1.4" data-path="programmingtips.html"><a href="programmingtips.html#all-packages-loaded-or-installed"><i class="fa fa-check"></i><b>8.1.4</b> All packages: loaded or installed</a></li>
<li class="chapter" data-level="8.1.5" data-path="programmingtips.html"><a href="programmingtips.html#bundling-package-dependencies-with-renv"><i class="fa fa-check"></i><b>8.1.5</b> Bundling package dependencies with <code>renv</code></a></li>
<li class="chapter" data-level="8.1.6" data-path="programmingtips.html"><a href="programmingtips.html#minimizing-package-dependencies"><i class="fa fa-check"></i><b>8.1.6</b> Minimizing package dependencies</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="programmingtips.html"><a href="programmingtips.html#a-logical-structure-for-your-scripts"><i class="fa fa-check"></i><b>8.2</b> A logical structure for your scripts</a><ul>
<li class="chapter" data-level="8.2.1" data-path="programmingtips.html"><a href="programmingtips.html#write-functions-not-long-scripts"><i class="fa fa-check"></i><b>8.2.1</b> Write functions, not long scripts</a></li>
<li class="chapter" data-level="8.2.2" data-path="programmingtips.html"><a href="programmingtips.html#divide-your-script-into-functional-blocks"><i class="fa fa-check"></i><b>8.2.2</b> Divide your script into functional blocks</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="programmingtips.html"><a href="programmingtips.html#pay-attention-to-detail-write-clean-code"><i class="fa fa-check"></i><b>8.3</b> Pay attention to detail: write clean code</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">A Learning Guide to R: data, analytical, and programming skills.</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="programmingtips" class="section level1">
<h1><span class="header-section-number">Chapter 8</span> Various topics</h1>
<div id="mastering-package-dependencies" class="section level2">
<h2><span class="header-section-number">8.1</span> Mastering package dependencies</h2>
<p>Besides having to write dependable code yourself (which might require some <em>defensive programming</em>, see Section @ref()), we also have to worry about dependencies of R packages, that is, code written by other R users.</p>

<div class="rmdreading">
<p>First scan through the section on R Packages (<a href="intro.html#packages">1.10</a>) to make sure you grasp all the fundamentals of R packages.</p>
</div>

<div id="what-version" class="section level3">
<h3><span class="header-section-number">8.1.1</span> What version?</h3>
<p>When an external package has changed on CRAN since you last used it, the <em>version</em> will have changed. You can inspect the version of a package with,</p>
<div class="sourceCode" id="cb745"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb745-1"><a href="programmingtips.html#cb745-1"></a><span class="kw">packageVersion</span>(<span class="st">&quot;dplyr&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &#39;0.8.3&#39;</code></pre>
<p>In a script, you can make sure a package is loaded with <em>at least</em> some version:</p>
<div class="sourceCode" id="cb747"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb747-1"><a href="programmingtips.html#cb747-1"></a><span class="kw">packageVersion</span>(<span class="st">&quot;dplyr&quot;</span>) <span class="op">&gt;</span><span class="st"> &quot;0.8.1&quot;</span></span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Which you can use like,</p>
<div class="sourceCode" id="cb749"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb749-1"><a href="programmingtips.html#cb749-1"></a><span class="cf">if</span>(<span class="kw">packageVersion</span>(<span class="st">&quot;dplyr&quot;</span>) <span class="op">&lt;</span><span class="st"> &quot;0.8.1&quot;</span>){</span>
<span id="cb749-2"><a href="programmingtips.html#cb749-2"></a>  <span class="kw">stop</span>(<span class="st">&quot;First update the dplyr package!&quot;</span>)</span>
<span id="cb749-3"><a href="programmingtips.html#cb749-3"></a>}</span></code></pre></div>
</div>
<div id="avoiding-conflicts" class="section level3">
<h3><span class="header-section-number">8.1.2</span> Avoiding conflicts</h3>
<p>To make sure you use a function from the intended package, you can use the <code>::</code> operator.</p>
<div class="sourceCode" id="cb750"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb750-1"><a href="programmingtips.html#cb750-1"></a>out &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">select</span>(mtcars, cyl, disp)</span></code></pre></div>
<p>In this example, we avoid a common problem with <code>select</code> and other functions in packages with very general names.</p>
<p>When writing packages and other production-level code, the use of <code>::</code> is strongly recommended. In practice in writing dependable scripts, I recommend using <code>::</code> where practical, and less for functions that have obviously unique names in the context.</p>
<p>Finally, one way to avoid conflicts is to use as few packages as possible, as described in a later section.</p>
</div>
<div id="the-search-path-and-conflicts" class="section level3">
<h3><span class="header-section-number">8.1.3</span> The search path and conflicts</h3>
<p>After you load a package with <code>library()</code>, it is added to the <em>search path</em>. This is an order of environments where R will look for the value of some object - often an R function.</p>
<p>Use <code>search</code> to inspect the current search path:</p>
<div class="sourceCode" id="cb751"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb751-1"><a href="programmingtips.html#cb751-1"></a><span class="kw">search</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;.GlobalEnv&quot;        &quot;package:knitr&quot;     &quot;package:magrittr&quot; 
##  [4] &quot;package:tibble&quot;    &quot;package:stats&quot;     &quot;package:graphics&quot; 
##  [7] &quot;package:grDevices&quot; &quot;package:utils&quot;     &quot;package:datasets&quot; 
## [10] &quot;package:methods&quot;   &quot;Autoloads&quot;         &quot;package:base&quot;</code></pre>
<p>When you type a function in R, like <code>summary()</code>, where will R find the definition of that function? In the search path above, it <strong>starts at first environment</strong> (where environments are packages, the global environment (what you see in the Environment pane in Rstudio), and some others). The search continues until a function is found with the name <code>summary</code>, and then R stops searching.</p>
<p>If you have <strong>conflicts</strong>, where the name of a function is defined in more than one package, the order in which you loaded the packages will affect from which package the function will actually be used. However, do not use this fact as a way to manage package dependencies, instead read the next section carefully.</p>
<p>To find the actual <strong>location of the package files</strong> on your system, use the following command (this might be helpful to archive all actual package files used in a project).</p>
<div class="sourceCode" id="cb753"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb753-1"><a href="programmingtips.html#cb753-1"></a><span class="kw">searchpaths</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;.GlobalEnv&quot;                                  
##  [2] &quot;c:/RLIBRARY/knitr&quot;                           
##  [3] &quot;c:/RLIBRARY/magrittr&quot;                        
##  [4] &quot;c:/RLIBRARY/tibble&quot;                          
##  [5] &quot;C:/Program Files/R/R-3.6.2/library/stats&quot;    
##  [6] &quot;C:/Program Files/R/R-3.6.2/library/graphics&quot; 
##  [7] &quot;C:/Program Files/R/R-3.6.2/library/grDevices&quot;
##  [8] &quot;C:/Program Files/R/R-3.6.2/library/utils&quot;    
##  [9] &quot;C:/Program Files/R/R-3.6.2/library/datasets&quot; 
## [10] &quot;C:/Program Files/R/R-3.6.2/library/methods&quot;  
## [11] &quot;Autoloads&quot;                                   
## [12] &quot;C:/PROGRA~1/R/R-36~1.2/library/base&quot;</code></pre>
</div>
<div id="all-packages-loaded-or-installed" class="section level3">
<h3><span class="header-section-number">8.1.4</span> All packages: loaded or installed</h3>
<p>To list all loaded packages, do:</p>
<div class="sourceCode" id="cb755"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb755-1"><a href="programmingtips.html#cb755-1"></a>pck &lt;-<span class="st"> </span><span class="kw">.packages</span>()</span>
<span id="cb755-2"><a href="programmingtips.html#cb755-2"></a>pck</span></code></pre></div>
<pre><code>##  [1] &quot;knitr&quot;     &quot;magrittr&quot;  &quot;tibble&quot;    &quot;stats&quot;     &quot;graphics&quot; 
##  [6] &quot;grDevices&quot; &quot;utils&quot;     &quot;datasets&quot;  &quot;methods&quot;   &quot;base&quot;</code></pre>
<p>And to list all <em>installed</em> packages,</p>
<div class="sourceCode" id="cb757"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb757-1"><a href="programmingtips.html#cb757-1"></a><span class="kw">.packages</span>(<span class="ot">TRUE</span>)</span></code></pre></div>
</div>
<div id="bundling-package-dependencies-with-renv" class="section level3">
<h3><span class="header-section-number">8.1.5</span> Bundling package dependencies with <code>renv</code></h3>
<p>If you want to be able to run your project a long time after you created it, one of the packages may have changed - causing an error or unexpected result. Although this is comparatively rare, it is still a possibility you want to avoid.</p>
<p>If we transport the script to another location, how can we be sure that the code will be working? Sometimes, newer versions of packages break old code, and in some cases packages are no longer hosted on CRAN after some time (though this is rare).</p>
<p>Another problem arises because all your R projects normally share the same library of R packages on your machine. That means that if you install a newer version in one project, it might cause code to stop working <em>in another project</em>.</p>
<p>The new <code>renv</code> package by Rstudio is at the time of writing the best solution to creating a project that is truly portable, since we can transport the packages alongside with the code.</p>

<div class="rmdtry">
Please read the documentation and installation instructions here: <a href="https://rstudio.github.io/renv/" class="uri">https://rstudio.github.io/renv/</a>.
</div>

<p>In practice, we basically just run this command once in a new (or existing) project:</p>
<div class="sourceCode" id="cb758"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb758-1"><a href="programmingtips.html#cb758-1"></a>renv<span class="op">::</span><span class="kw">init</span>()</span></code></pre></div>

<div class="rmdcaution">
The above command can take &gt;10min to execute.
</div>

<p>All package dependencies are downloaded and kept in a special <code>renv</code> subfolder (the original source code for all the packages).</p>
<p>After initializing <code>renv</code> in a directory, you can keep using <code>install.packages</code> and <code>library</code> as usual, the packages are now installed in your local <code>renv</code> folder, and in a global <strong>cache</strong> which <code>renv</code> manages for you.</p>
<p>If you are using, say package version 1.2, and version 1.3 is installed on your machine from a different project, the <code>renv</code> project will still use 1.2, unless we update this package locally ourselves (simply with <code>install.packages</code>).</p>
</div>
<div id="minimizing-package-dependencies" class="section level3">
<h3><span class="header-section-number">8.1.6</span> Minimizing package dependencies</h3>
<p>Although a solution like <code>renv</code> can help us to make scripts reproducable, in practice this rule of thumb is a valuable lesson:</p>
<p><strong>Use as few external packages in your code as possible</strong></p>
<p>Complicated projects tend to break easily, and often external R packages are to blame.</p>
<ul>
<li><p>Don’t use packages when you only use one simple function from it. In that case, copy the function to your own code base, and <code>source</code> it in a script.</p></li>
<li><p>Try to use packages that are still in active development, have a significant user- (or fan-) base, such as the <code>tidyverse</code> packages, and are popular.</p></li>
</ul>
<p>These warnings should not shy you away from exploring the great universe of &gt;15000 R packages that are now publicly available, chances are some obscure analysis or method is already implemented.</p>
</div>
</div>
<div id="a-logical-structure-for-your-scripts" class="section level2">
<h2><span class="header-section-number">8.2</span> A logical structure for your scripts</h2>
<div id="write-functions-not-long-scripts" class="section level3">
<h3><span class="header-section-number">8.2.1</span> Write functions, not long scripts</h3>
<p>If a script becomes too long, write more functions. Writing your own functions is the most important advise if you want to write and maintain robust, complex projects.</p>
<p>As pointed out in the Chapter on Project management (<a href="projectman.html#projectman">7</a>), save these functions separately, for example “R/functions.R”, and <code>source</code> them with:</p>
<div class="sourceCode" id="cb759"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb759-1"><a href="programmingtips.html#cb759-1"></a><span class="kw">source</span>(<span class="st">&quot;R/functions.R&quot;</span>)</span></code></pre></div>
<p>Unfortunately <code>source</code> is not vectorized, so to read all R scripts from a subdirectory you can simply do,</p>
<div class="sourceCode" id="cb760"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb760-1"><a href="programmingtips.html#cb760-1"></a><span class="cf">for</span>(fn <span class="cf">in</span> <span class="kw">dir</span>(<span class="st">&quot;R&quot;</span>, <span class="dt">pattern =</span> <span class="st">&quot;[.]R$&quot;</span>, <span class="dt">full.names =</span> <span class="ot">TRUE</span>)){</span>
<span id="cb760-2"><a href="programmingtips.html#cb760-2"></a>  <span class="kw">source</span>(fn)</span>
<span id="cb760-3"><a href="programmingtips.html#cb760-3"></a>}</span></code></pre></div>

<div class="rmdtry">
Write the above snippet into a function, which takes the directory to search as an argument.
</div>

</div>
<div id="divide-your-script-into-functional-blocks" class="section level3">
<h3><span class="header-section-number">8.2.2</span> Divide your script into functional blocks</h3>
<p>Dividing your scripts into a few functional blocks can help readability and reliability.
With special formatting, you can even improve the <em>table of contents</em> (TOC) menu in Rstudio for a script. Run the example below, and then find the TOC button in Rstudio:</p>
<p><img src="screenshots/tablecontents_button.png" width="30%" /></p>
<p><strong>Access the (nearly) automatic TOC in Rstudio</strong></p>
<p>In the following example script, note that we load all packages at the beginning of the script, so that when something goes wrong at that stage, we know before executing any of the ‘real’ code.</p>
<p>Also note the use of <code>#-----</code>, this helps to make the TOC as mentioned above.</p>
<div class="sourceCode" id="cb761"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb761-1"><a href="programmingtips.html#cb761-1"></a><span class="co"># An example script</span></span>
<span id="cb761-2"><a href="programmingtips.html#cb761-2"></a><span class="co"># 2020, Author</span></span>
<span id="cb761-3"><a href="programmingtips.html#cb761-3"></a></span>
<span id="cb761-4"><a href="programmingtips.html#cb761-4"></a></span>
<span id="cb761-5"><a href="programmingtips.html#cb761-5"></a><span class="co">#----- Load packages -----</span></span>
<span id="cb761-6"><a href="programmingtips.html#cb761-6"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb761-7"><a href="programmingtips.html#cb761-7"></a><span class="kw">library</span>(rvest)</span>
<span id="cb761-8"><a href="programmingtips.html#cb761-8"></a><span class="kw">library</span>(stringr)</span>
<span id="cb761-9"><a href="programmingtips.html#cb761-9"></a><span class="kw">library</span>(glue)</span>
<span id="cb761-10"><a href="programmingtips.html#cb761-10"></a></span>
<span id="cb761-11"><a href="programmingtips.html#cb761-11"></a><span class="co">#----- Custom functions -----</span></span>
<span id="cb761-12"><a href="programmingtips.html#cb761-12"></a><span class="kw">source</span>(<span class="st">&quot;R/functions.R&quot;</span>)</span>
<span id="cb761-13"><a href="programmingtips.html#cb761-13"></a><span class="kw">source</span>(<span class="st">&quot;R/database_functions.R&quot;</span>)</span>
<span id="cb761-14"><a href="programmingtips.html#cb761-14"></a></span>
<span id="cb761-15"><a href="programmingtips.html#cb761-15"></a><span class="co">#----- Configuration -----</span></span>
<span id="cb761-16"><a href="programmingtips.html#cb761-16"></a></span>
<span id="cb761-17"><a href="programmingtips.html#cb761-17"></a><span class="co"># Load configuration (passwords etc., see next Section!)</span></span>
<span id="cb761-18"><a href="programmingtips.html#cb761-18"></a>.conf &lt;-<span class="st"> </span>yaml<span class="op">::</span><span class="kw">read_yaml</span>(<span class="dt">file =</span> <span class="st">&quot;config.yml&quot;</span>)</span>
<span id="cb761-19"><a href="programmingtips.html#cb761-19"></a></span>
<span id="cb761-20"><a href="programmingtips.html#cb761-20"></a><span class="co">#----- Database -----</span></span>
<span id="cb761-21"><a href="programmingtips.html#cb761-21"></a></span>
<span id="cb761-22"><a href="programmingtips.html#cb761-22"></a><span class="co"># Make database connection</span></span>
<span id="cb761-23"><a href="programmingtips.html#cb761-23"></a>db_con &lt;-<span class="st"> </span><span class="kw">make_database_connection_knmi</span>(.conf)</span>
<span id="cb761-24"><a href="programmingtips.html#cb761-24"></a></span>
<span id="cb761-25"><a href="programmingtips.html#cb761-25"></a><span class="co"># Download data</span></span>
<span id="cb761-26"><a href="programmingtips.html#cb761-26"></a>cloud_data &lt;-<span class="st"> </span><span class="kw">download_cloud_data</span>(<span class="dt">con =</span> db_con)</span>
<span id="cb761-27"><a href="programmingtips.html#cb761-27"></a></span>
<span id="cb761-28"><a href="programmingtips.html#cb761-28"></a><span class="co"># Archive the data</span></span>
<span id="cb761-29"><a href="programmingtips.html#cb761-29"></a>fn &lt;-<span class="st"> </span><span class="kw">glue</span>(<span class="st">&quot;archive/out_{Sys.Date()}.rds&quot;</span>)</span>
<span id="cb761-30"><a href="programmingtips.html#cb761-30"></a><span class="kw">try</span>(<span class="kw">saveRDS</span>(cloud_data, fn), <span class="dt">silent =</span> <span class="ot">TRUE</span>)</span>
<span id="cb761-31"><a href="programmingtips.html#cb761-31"></a></span>
<span id="cb761-32"><a href="programmingtips.html#cb761-32"></a><span class="co">#----- Visualization -----</span></span>
<span id="cb761-33"><a href="programmingtips.html#cb761-33"></a></span>
<span id="cb761-34"><a href="programmingtips.html#cb761-34"></a><span class="co"># Make visuals</span></span>
<span id="cb761-35"><a href="programmingtips.html#cb761-35"></a><span class="kw">make_cloud_maps</span>(<span class="dt">data =</span> cloud_data)</span>
<span id="cb761-36"><a href="programmingtips.html#cb761-36"></a></span>
<span id="cb761-37"><a href="programmingtips.html#cb761-37"></a><span class="co">#----- Model -----</span></span>
<span id="cb761-38"><a href="programmingtips.html#cb761-38"></a></span>
<span id="cb761-39"><a href="programmingtips.html#cb761-39"></a><span class="co"># Do some advanced modelling</span></span>
<span id="cb761-40"><a href="programmingtips.html#cb761-40"></a>model_run &lt;-<span class="st"> </span><span class="kw">run_cloudy_model</span>(<span class="dt">data =</span> cloud_data)</span>
<span id="cb761-41"><a href="programmingtips.html#cb761-41"></a></span>
<span id="cb761-42"><a href="programmingtips.html#cb761-42"></a><span class="co"># Upload the model results to a remote database</span></span>
<span id="cb761-43"><a href="programmingtips.html#cb761-43"></a><span class="kw">upload_model_db16</span>(model_run, <span class="dt">config =</span> .conf)</span></code></pre></div>
<p>The <em>fictional</em> script above is just an example how you can divide a <em>master script</em> into logical statements, using functions that perform all the underlying tasks.</p>
<p>One major advantage of the above approach is because functions execute their “inner workings” in a <strong>separate environment</strong>, which means that objects inside a function are not visible either outside the function (like the main script) or in any other script.</p>
<p>That way, executing the script above does not produce any objects in the environment (the memory) other than the ones <em>returned</em> by the functions. All the intermediate objects that were executed inside each function have disappeared, freeing memory and avoiding conflicts.</p>
</div>
</div>
<div id="pay-attention-to-detail-write-clean-code" class="section level2">
<h2><span class="header-section-number">8.3</span> Pay attention to detail: write clean code</h2>
<p>You may not want to spend the time making sure your code is neatly formatted, but it helps tremendously in a) spotting syntax errors while you write, and b) make your code vastly more readable by another person.</p>
<p>Unlike a language like Python, in R you are incredibly free to format your code (with spaces, tabs, newlines) pretty much however you want. Although this gives the programmer a lot of room for creative (and short) code, it can also be frustrating because it makes some code hard to read (when it is “poorly” formatted).</p>

<div class="rmdreading">
I find <em>Google’s style guide</em> a very neat an readable way to indent and format R code: <a href="https://google.github.io/styleguide/Rguide.html" class="uri">https://google.github.io/styleguide/Rguide.html</a>
</div>


<div class="rmdtry">
If you would like to use a tool that checks your code for various superficial (and some less superficial) problems, try using <code>lintr</code> : <a href="https://github.com/jimhester/lintr" class="uri">https://github.com/jimhester/lintr</a> (I find it too restrictive and too opinionated, but you will certainly learn a lot by going through the process).
</div>


</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="projectman.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["twitter", "linkedin"],
"google": false
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["prcr.pdf"],
"toc": {
"collapse": "subsection"
},
"favicon": "favicon.ico",
"githubrepo": "RemkoDuursma/prcr",
"description": "A Learning Guide to R: : data, analytical, and programming skills"
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
